webpackJsonp([7],{

/***/ "./js/screens/checkout/actions.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchCheckout = exports.setCheckoutStatusModalVisibility = exports.setCheckoutAttemptingStatus = exports.setDeliveryAddress = exports.setPaymentMode = exports.setPaymentMethod = exports.attemptOrderPlacement = undefined;\n\nvar _constants = __webpack_require__(\"./js/screens/checkout/constants.js\");\n\nvar _service = __webpack_require__(\"../service/service.js\");\n\nvar _ApiService = __webpack_require__(\"./js/services/ApiService/index.js\");\n\nvar _actions = __webpack_require__(\"./js/containers/app/actions.js\");\n\nvar _actions2 = __webpack_require__(\"./js/screens/account/actions.js\");\n\nvar HOST_URL = window.location.origin === \"https://instachaw.com\" ? \"https://api.instachaw.com\" : \"http://localhost:3333\";\n\nvar attemptOrderPlacement = exports.attemptOrderPlacement = function attemptOrderPlacement(data, callback) {\n  return function (dispatch) {\n    var endpoint = \"api/v1/orders\";\n    dispatch(setCheckoutAttemptingStatus({\n      isAttemptingCheckout: true\n    }));\n\n    (0, _ApiService.sendRequest)({\n      endpoint: HOST_URL + \"/\" + endpoint,\n      method: \"POST\",\n      payload: JSON.stringify(data)\n    }).then(function (response) {\n      if (typeof response !== \"undefined\" && response !== null) {\n        dispatch((0, _actions2.addUserOrder)({\n          order: response\n        }));\n\n        dispatch(setCheckoutAttemptingStatus({\n          isAttemptingCheckout: false\n        }));\n\n        callback(response);\n      } else {\n        setTimeout(function () {\n          dispatch(setCheckoutAttemptingStatus({\n            isAttemptingCheckout: false\n          }));\n        }, 1000);\n      }\n    }).catch(function (e) {\n      return console.log(e);\n    });\n  };\n};\n\nvar loadCheckout = function loadCheckout(data) {\n  return {\n    type: _constants.SET_CHECKOUT,\n    data: data\n  };\n};\n\nvar setPaymentMethod = exports.setPaymentMethod = function setPaymentMethod(data) {\n  return {\n    type: _constants.SET_PAYMENT_METHOD,\n    data: data\n  };\n};\n\nvar setPaymentMode = exports.setPaymentMode = function setPaymentMode(data) {\n  return {\n    type: _constants.SET_PAYMENT_MODE,\n    data: data\n  };\n};\n\nvar setDeliveryAddress = exports.setDeliveryAddress = function setDeliveryAddress(data) {\n  return {\n    type: _constants.SET_DELIVERY_ADDRESS,\n    data: data\n  };\n};\n\nvar setCheckoutAttemptingStatus = exports.setCheckoutAttemptingStatus = function setCheckoutAttemptingStatus(data) {\n  return {\n    type: _constants.SET_CHECKOUT_ATTEMPTING_STATUS,\n    data: data\n  };\n};\n\nvar setCheckoutStatusModalVisibility = exports.setCheckoutStatusModalVisibility = function setCheckoutStatusModalVisibility(data) {\n  return {\n    type: _constants.SET_CHECKOUT_STATUS,\n    data: data\n  };\n};\n\nvar fetchCheckout = exports.fetchCheckout = function fetchCheckout(data) {\n  return function (dispatch) {\n    dispatch((0, _actions.isLoading)(true));\n\n    return (0, _service.getPageData)(data).then(function (response) {\n      dispatch((0, _actions.setMeta)(response.meta));\n      dispatch((0, _actions.setUrl)(response.url));\n      dispatch((0, _actions.setTitle)(response.title));\n      return response;\n    }).then(function (response) {\n      dispatch((0, _actions.isLoading)(false));\n      dispatch(loadCheckout(response));\n    }).catch(function (error) {\n      console.error(error);\n      throw error;\n    });\n  };\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/screens/checkout/actions.js\n// module id = ./js/screens/checkout/actions.js\n// module chunks = 0 7\n\n//# sourceURL=webpack:///./js/screens/checkout/actions.js?");

/***/ }),

/***/ "./js/screens/checkout/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _templateObject = _taggedTemplateLiteral([\"\"], [\"\"]),\n    _templateObject2 = _taggedTemplateLiteral([\"\\n  background: #f5f5f5;\\n  width: 100%;\\n  height: 90vh;\\n  border-radius: 4px;\\n  display: flex;\\n\"], [\"\\n  background: #f5f5f5;\\n  width: 100%;\\n  height: 90vh;\\n  border-radius: 4px;\\n  display: flex;\\n\"]);\n\nvar _react = __webpack_require__(\"../node_modules/react/index.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(\"../node_modules/prop-types/index.js\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = __webpack_require__(\"../node_modules/react-redux/es/index.js\");\n\nvar _reactSpinners = __webpack_require__(\"../node_modules/react-spinners/index.js\");\n\nvar _reactRouterDom = __webpack_require__(\"../node_modules/react-router-dom/es/index.js\");\n\nvar _reducerInjector = __webpack_require__(\"./js/redux/reducerInjector.js\");\n\nvar _reducerInjector2 = _interopRequireDefault(_reducerInjector);\n\nvar _constants = __webpack_require__(\"./js/screens/checkout/constants.js\");\n\nvar _actions = __webpack_require__(\"./js/screens/checkout/actions.js\");\n\nvar _reducer = __webpack_require__(\"./js/screens/checkout/reducer.js\");\n\nvar _reducer2 = __webpack_require__(\"./js/containers/app/reducer.js\");\n\nvar _actions2 = __webpack_require__(\"./js/containers/header/actions.js\");\n\nvar _actions3 = __webpack_require__(\"./js/containers/footer/actions.js\");\n\nvar _reducer3 = __webpack_require__(\"./js/screens/cart/reducer.js\");\n\nvar _actions4 = __webpack_require__(\"./js/screens/account/actions.js\");\n\nvar _reducer4 = __webpack_require__(\"./js/screens/account/reducer.js\");\n\nvar _actions5 = __webpack_require__(\"./js/screens/cart/actions.js\");\n\nvar _pclnDesignSystem = __webpack_require__(\"../node_modules/pcln-design-system/dist/index.js\");\n\nvar _atoms = __webpack_require__(\"./js/components/UI/atoms/index.js\");\n\nvar _feed = __webpack_require__(\"./js/containers/feed/index.js\");\n\nvar _feed2 = _interopRequireDefault(_feed);\n\nvar _styledComponents = __webpack_require__(\"../node_modules/styled-components/dist/styled-components.browser.es.js\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _reactPose = __webpack_require__(\"../node_modules/react-pose/lib/index.js\");\n\nvar _reactPose2 = _interopRequireDefault(_reactPose);\n\nvar _popmotion = __webpack_require__(\"../node_modules/popmotion/dist/popmotion.es.js\");\n\nvar _util = __webpack_require__(\"./js/util/util.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nvar ActionStripContainer = (0, _styledComponents2.default)(_pclnDesignSystem.Card)(_templateObject);\n\nvar LocationCard = function LocationCard(props) {\n  return _react2.default.createElement(\n    _pclnDesignSystem.Card,\n    { borderWidth: 1, bg: \"white\" },\n    _react2.default.createElement(\n      _pclnDesignSystem.Box,\n      { pt: 2, pb: 3, px: 3 },\n      _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        { mb: 1 },\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          { style: { flex: 4 } },\n          _react2.default.createElement(\n            _pclnDesignSystem.Text,\n            { fontSize: 1, bold: true },\n            \"Address\"\n          )\n        ),\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          { onClick: props.onSummaryToggleClick },\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            { flexDirection: \"column\", justify: \"center\" },\n            _react2.default.createElement(_pclnDesignSystem.Icon, { mr: 1, size: 12, name: \"modeEdit\", color: \"blue\" })\n          ),\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            { flexDirection: \"column\", justify: \"center\" },\n            _react2.default.createElement(\n              _pclnDesignSystem.Link,\n              {\n                onClick: function onClick(e) {\n                  e.preventDefault();\n                  props.onSetLocationInputDisabled(false);\n                },\n                mr: 1,\n                color: \"blue\",\n                fontSize: 0\n              },\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { fontSize: 0 },\n                \"Change Address\"\n              )\n            )\n          )\n        )\n      ),\n      _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        null,\n        _react2.default.createElement(_pclnDesignSystem.Input, {\n          id: \"location\",\n          value: props.location,\n          style: {\n            backgroundColor: props.isLocationInputDisabled ? \"#eee\" : \"#fff\",\n            color: \"#999\"\n          },\n          onFocus: function onFocus(e) {\n            return e.target.select();\n          },\n          onChange: function onChange(e) {\n            return props.onLocationChange(e.target.value);\n          },\n          onBlur: function onBlur(e) {\n            return props.onSetLocationInputDisabled(true);\n          },\n          color: \"lightGray\",\n          disabled: props.isLocationInputDisabled\n        })\n      )\n    )\n  );\n};\n\nLocationCard.propTypes = {\n  location: _propTypes2.default.string,\n  isLocationInputDisabled: _propTypes2.default.bool\n};\n\nLocationCard.defaultProps = {\n  isLocationInputDisabled: false\n};\n\nvar ActionStrip = function ActionStrip(props) {\n  return _react2.default.createElement(\n    ActionStripContainer,\n    _extends({\n      boxShadowSize: \"md\",\n      bg: props.bg,\n      px: 1,\n      py: 2\n    }, props),\n    _react2.default.createElement(\n      _pclnDesignSystem.Flex,\n      { flexDirection: \"column\" },\n      _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        { justify: \"center\" },\n        _react2.default.createElement(_pclnDesignSystem.Icon, { color: props.color, size: 20, name: props.icon })\n      ),\n      _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        { justify: \"center\" },\n        _react2.default.createElement(\n          _pclnDesignSystem.Text,\n          { fontSize: 0, color: props.color },\n          props.message\n        )\n      )\n    )\n  );\n};\n\nActionStrip.propTypes = {\n  actionIcon: _propTypes2.default.string,\n  color: _propTypes2.default.string\n};\n\nActionStrip.defaultProps = {\n  actionIcon: \"arrowRight\",\n  color: \"gray\",\n  bg: \"white\"\n};\n\nvar PaymentCard = function PaymentCard(props) {\n  return _react2.default.createElement(\n    _pclnDesignSystem.Card,\n    { bg: \"lightGray\" },\n    _react2.default.createElement(\n      _pclnDesignSystem.Box,\n      { pt: 2, pb: 3, px: 3 },\n      _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        { mb: 1 },\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          { style: { flex: 4 } },\n          _react2.default.createElement(\n            _pclnDesignSystem.Text,\n            { fontSize: 1, bold: true },\n            \"Payment Method\"\n          )\n        ),\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          { onClick: props.onSummaryToggleClick },\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            { flexDirection: \"column\", justify: \"center\" },\n            _react2.default.createElement(_pclnDesignSystem.Icon, { size: 12, name: \"swap\", color: \"blue\" })\n          ),\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            { flexDirection: \"column\", justify: \"center\" },\n            _react2.default.createElement(\n              _pclnDesignSystem.Link,\n              {\n                onClick: function onClick(e) {\n                  e.preventDefault();\n                  props.onSetActivePaymentMethod(props.activePaymentMethod === \"naira\" ? props.getValidWallet() : \"naira\");\n                },\n                mr: 1,\n                color: \"blue\",\n                fontSize: 0\n              },\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { fontSize: 0 },\n                \"Switch Payment\"\n              )\n            )\n          )\n        )\n      ),\n      _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        null,\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          { width: 0.5, mb: 1 },\n          _react2.default.createElement(\n            \"label\",\n            { style: { width: \"100%\" } },\n            _react2.default.createElement(ActionStrip, {\n              bg: props.activePaymentMethod === \"STEEM\" || props.activePaymentMethod === \"SBD\" ? \"blue\" : \"white\",\n              icon: props.activePaymentMethod === \"STEEM\" || props.activePaymentMethod === \"SBD\" ? \"check\" : \"creditCard\",\n              color: props.activePaymentMethod !== \"STEEM\" && props.activePaymentMethod !== \"SBD\" ? \"blue\" : \"white\",\n              message: (props.activePaymentMethod === \"STEEM\" || props.activePaymentMethod === \"SBD\" ? \"Paying\" : \"Pay\") + \" with STEEM/SBD\",\n              onClick: function onClick(e) {\n                return props.onSetActivePaymentMethod(props.getValidWallet());\n              }\n            }),\n            _react2.default.createElement(\"input\", {\n              type: \"radio\",\n              name: \"payment-method\",\n              value: \"STEEM\",\n              style: { display: \"none\" }\n            })\n          )\n        ),\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          { width: 0.5, mb: 1 },\n          _react2.default.createElement(\n            \"label\",\n            {\n              style: {\n                width: \"100%\"\n              }\n            },\n            _react2.default.createElement(ActionStrip, {\n              bg: props.activePaymentMethod === \"naira\" ? \"blue\" : \"white\",\n              icon: props.activePaymentMethod === \"naira\" ? \"check\" : \"creditCard\",\n              color: props.activePaymentMethod !== \"naira\" ? \"blue\" : \"white\",\n              onClick: function onClick(e) {\n                return props.onSetActivePaymentMethod(\"naira\");\n              },\n              message: (props.activePaymentMethod === \"naira\" ? \"Paying\" : \"Pay\") + \" with Cash\"\n            }),\n            _react2.default.createElement(\"input\", {\n              type: \"radio\",\n              name: \"payment-method\",\n              value: \"naira\",\n              style: { display: \"none\" }\n            })\n          )\n        )\n      )\n    )\n  );\n};\n\nvar PayModeCard = function PayModeCard(props) {\n  return _react2.default.createElement(\n    _pclnDesignSystem.Card,\n    { bg: \"lightGray\" },\n    _react2.default.createElement(\n      _pclnDesignSystem.Box,\n      { pt: 2, pb: 3, px: 3 },\n      _react2.default.createElement(\n        _pclnDesignSystem.Box,\n        { mb: 1 },\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          { style: { flex: 4 } },\n          _react2.default.createElement(\n            _pclnDesignSystem.Text,\n            { fontSize: 1, bold: true },\n            \"Mode of Payment\"\n          )\n        )\n      ),\n      _react2.default.createElement(\n        _pclnDesignSystem.Box,\n        null,\n        _react2.default.createElement(\n          _pclnDesignSystem.Label,\n          { regular: true, fontSize: \"13px\" },\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            null,\n            _react2.default.createElement(_atoms.Radio, {\n              value: \"on-demand\",\n              id: \"on-demand\",\n              name: \"payment-mode\",\n              onChange: function onChange(e) {\n                if (props.activePaymentMethod === \"naira\") {\n                  return alert(\"Sorry, we only accept cash for pay on delivery at the moment.\");\n                }\n                props.onSetActivePaymentMode(e.target.value);\n              },\n              checked: props.activePaymentMode === \"on-demand\"\n            }),\n            _react2.default.createElement(\n              _pclnDesignSystem.Text,\n              { ml: 2 },\n              \"Pay on demand (immediately)\"\n            )\n          )\n        ),\n        _react2.default.createElement(\n          _pclnDesignSystem.Label,\n          { htmlFor: \"on-delivery\", regular: true, fontSize: \"13px\" },\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            null,\n            _react2.default.createElement(_atoms.Radio, {\n              value: \"on-delivery\",\n              id: \"on-delivery\",\n              name: \"payment-mode\",\n              onChange: function onChange(e) {\n                return props.onSetActivePaymentMode(e.target.value);\n              },\n              checked: props.activePaymentMode === \"on-delivery\"\n            }),\n            _react2.default.createElement(\n              _pclnDesignSystem.Text,\n              { ml: 2 },\n              \"Pay on delivery (later)\"\n            )\n          )\n        )\n      ),\n      _react2.default.createElement(_pclnDesignSystem.Flex, null)\n    )\n  );\n};\n\nvar CheckoutInfo = function CheckoutInfo(props) {\n  return _react2.default.createElement(\n    _pclnDesignSystem.Flex,\n    _extends({ flexDirection: \"column\" }, props),\n    _react2.default.createElement(\n      _pclnDesignSystem.Text,\n      { fontSize: 2, bold: true },\n      \"Complete Checkout\"\n    ),\n    _react2.default.createElement(\n      _pclnDesignSystem.Text,\n      { fontSize: 0, color: \"gray\", mb: 3 },\n      \"Just a last look at your info\"\n    ),\n    _react2.default.createElement(\n      _pclnDesignSystem.Box,\n      { mb: 3 },\n      _react2.default.createElement(LocationCard, props)\n    ),\n    _react2.default.createElement(\n      _pclnDesignSystem.Box,\n      { mb: 3 },\n      _react2.default.createElement(PaymentCard, props)\n    ),\n    _react2.default.createElement(\n      _pclnDesignSystem.Box,\n      { mb: 3 },\n      _react2.default.createElement(PayModeCard, props)\n    )\n  );\n};\n\nvar Modal = _reactPose2.default.div({\n  fullscreen: {\n    scale: 1,\n    transition: \"tween\"\n  },\n  idle: {\n    scale: 0,\n    transition: \"tween\"\n  }\n});\nvar StyledModal = (0, _styledComponents2.default)(Modal)(_templateObject2);\n\nvar Checkout = function (_React$PureComponent) {\n  _inherits(Checkout, _React$PureComponent);\n\n  function Checkout(props) {\n    _classCallCheck(this, Checkout);\n\n    var _this = _possibleConstructorReturn(this, (Checkout.__proto__ || Object.getPrototypeOf(Checkout)).call(this, props));\n\n    _this.state = {\n      isSummaryMinimized: true,\n      paymentMethod: \"STEEM\",\n      paymentMode: \"on-demand\",\n      location: \"Room 3, Vanessa Suite, Alaska\",\n      isLocationInputDisabled: true,\n      latestPlacementCode: \"\"\n    };\n    _this.setActivePaymentMethod = _this.setActivePaymentMethod.bind(_this);\n    _this.setActivePaymentMode = _this.setActivePaymentMode.bind(_this);\n    _this.handleCheckoutSubmit = _this.handleCheckoutSubmit.bind(_this);\n    return _this;\n  }\n\n  _createClass(Checkout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _props = this.props,\n          setHeaderVisibility = _props.setHeaderVisibility,\n          setFooterVisibility = _props.setFooterVisibility,\n          onLoadCheckout = _props.onLoadCheckout,\n          match = _props.match,\n          app = _props.app;\n\n\n      if (app.url !== match.url) {\n        onLoadCheckout(match.path);\n      }\n\n      setTimeout(function () {\n        setHeaderVisibility({\n          isHeaderVisible: false\n        });\n        setFooterVisibility({\n          isFooterVisible: false\n        });\n      }, 200);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.setActivePaymentMethod = null;\n      this.setActivePaymentMode = null;\n      this.handleCheckoutSubmit = null;\n\n      // this.props.clearCart();\n      this.props.setCheckoutStatusModalVisibility({\n        isCheckoutStatusModalOpen: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          cart = _props2.cart,\n          checkout = _props2.checkout;\n\n      return cart.items.length > 0 || checkout.isCheckoutStatusModalOpen ? _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        { mt: 3, px: 3, flexDirection: \"column\" },\n        _react2.default.createElement(\n          StyledModal,\n          {\n            pose: checkout.isCheckoutStatusModalOpen ? \"fullscreen\" : \"idle\",\n            style: {\n              display: !checkout.isCheckoutStatusModalOpen ? \"none\" : \"block\"\n            }\n          },\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            {\n              p: 2,\n              flexDirection: \"column\",\n              justify: \"center\",\n              alignItems: \"center\",\n              style: {\n                height: \"100%\"\n              }\n            },\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 2 },\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { align: \"center\", fontSize: 3, bold: true },\n                \"Order Placed Successfully.\"\n              ),\n              _react2.default.createElement(\n                _pclnDesignSystem.Text.p,\n                { align: \"center\", fontSize: 3 },\n                \"You successfully placed an order with code \\xA0\",\n                _react2.default.createElement(\n                  \"b\",\n                  null,\n                  this.state.latestPlacementCode\n                ),\n                \".\"\n              )\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Flex,\n              { justify: \"center\" },\n              _react2.default.createElement(\n                _pclnDesignSystem.Button,\n                { onClick: function onClick(e) {\n                    return _this2.props.history.push(\"/account/orders\");\n                  } },\n                \"View Active Orders\"\n              )\n            )\n          )\n        ),\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          { justify: \"center\", alignItems: \"center\" },\n          _react2.default.createElement(\n            _pclnDesignSystem.Box,\n            { width: [1, 0.9, 0.7, 0.7] },\n            _react2.default.createElement(\n              _pclnDesignSystem.Flex,\n              {\n                style: {\n                  display: checkout.isCheckoutStatusModalOpen ? \"none\" : \"block\"\n                }\n              },\n              _react2.default.createElement(CheckoutInfo, {\n                getValidWallet: function getValidWallet() {\n                  return _this2.getValidWallet();\n                },\n                location: this.props.checkout.deliveryAddress,\n                onLocationChange: function onLocationChange(location) {\n                  return _this2.props.setDeliveryAddress({\n                    deliveryAddress: location\n                  });\n                },\n                onSetLocationInputDisabled: function onSetLocationInputDisabled(isLocationInputDisabled) {\n                  return _this2.setState({\n                    isLocationInputDisabled: isLocationInputDisabled\n                  });\n                },\n                isLocationInputDisabled: this.state.isLocationInputDisabled,\n                onSetActivePaymentMethod: this.setActivePaymentMethod,\n                onSetActivePaymentMode: this.setActivePaymentMode,\n                activePaymentMethod: this.props.checkout.paymentMethod,\n                activePaymentMode: this.props.checkout.paymentMode\n              }),\n              _react2.default.createElement(\n                _pclnDesignSystem.GreenButton,\n                {\n                  disabled: this.props.checkout.isAttemptingCheckout || !this.isValidForm(),\n                  onClick: function onClick(e) {\n                    return _this2.handleCheckoutSubmit(e);\n                  },\n                  mb: 4,\n                  fullWidth: true\n                },\n                !this.props.checkout.isAttemptingCheckout ? _react2.default.createElement(\n                  _pclnDesignSystem.Text,\n                  null,\n                  \"Place Order\"\n                ) : _react2.default.createElement(_reactSpinners.SyncLoader, { color: \"#f1f1f1\", size: 10, loading: true })\n              )\n            )\n          )\n        )\n      ) : _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        {\n          px: 3,\n          flexDirection: \"column\",\n          justify: \"center\",\n          style: {\n            height: \"80%\",\n            position: \"absolute\",\n            width: \"100%\"\n          }\n        },\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          {\n            flexDirection: \"column\",\n            justify: \"center\",\n            alignItems: \"center\",\n            style: {\n              textAlign: \"center\"\n            }\n          },\n          _react2.default.createElement(\n            _pclnDesignSystem.Text,\n            { fontSize: 4, mb: 3, bold: true },\n            \"Please fill me.\"\n          ),\n          _react2.default.createElement(\n            _pclnDesignSystem.Text,\n            { mb: 3 },\n            \"Add tons of delightful treats to your cart below.\"\n          ),\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            { justify: \"center\", alignItems: \"center\" },\n            _react2.default.createElement(\n              _atoms.OutlineButton,\n              { onClick: function onClick(e) {\n                  return _this2.props.history.push(\"/\");\n                } },\n              \"See treats for your cart\"\n            )\n          )\n        )\n      );\n    }\n  }, {\n    key: \"isValidForm\",\n    value: function isValidForm() {\n      return this.props.checkout.deliveryAddress.length > 1;\n    }\n  }, {\n    key: \"setActivePaymentMode\",\n    value: function setActivePaymentMode(mode) {\n      this.props.setPaymentMode({\n        paymentMode: mode\n      });\n    }\n  }, {\n    key: \"setActivePaymentMethod\",\n    value: function setActivePaymentMethod(method) {\n      this.props.setPaymentMethod({\n        paymentMethod: method\n      });\n    }\n  }, {\n    key: \"getPaymentAmount\",\n    value: function getPaymentAmount() {\n      var paymentCurrency = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"SBD\";\n\n      var paymentAmount = this.getPaymentTotal();\n      return paymentCurrency === \"SBD\" ? (0, _util.roundToDecimalPlaces)(paymentAmount / this.props.app.rates[\"SBD\"], 3) : (0, _util.roundToDecimalPlaces)(paymentAmount / this.props.app.rates[\"STEEM\"], 3);\n    }\n  }, {\n    key: \"getValidWallet\",\n    value: function getValidWallet() {\n      return this.getWalletBalance(\"SBD\") < this.getPaymentAmount(\"SBD\") ? \"STEEM\" : \"SBD\";\n    }\n  }, {\n    key: \"getWallet\",\n    value: function getWallet(wallet) {\n      return this.props.account.user !== null ? this.props.account.user.wallets.filter(function (currentWallet) {\n        return currentWallet.title === wallet;\n      })[0] : null;\n    }\n  }, {\n    key: \"getWalletBalance\",\n    value: function getWalletBalance(wallet) {\n      return this.props.account.user !== null ? this.props.account.user.wallets.filter(function (currentWallet) {\n        return currentWallet.title === wallet;\n      })[0].balance : 0;\n    }\n  }, {\n    key: \"getPaymentSubtotal\",\n    value: function getPaymentSubtotal() {\n      return (0, _util.roundToDecimalPlaces)(this.props.cart.items.reduce(function (total, item) {\n        return total + parseFloat(item.price) * parseInt(item.qty, 10);\n      }, 0));\n    }\n  }, {\n    key: \"getPaymentVat\",\n    value: function getPaymentVat() {\n      return (0, _util.roundToDecimalPlaces)(this.props.cart.items.reduce(function (total, item) {\n        return total + parseFloat(item.vat) * parseInt(item.qty, 10);\n      }, 0));\n    }\n  }, {\n    key: \"getPaymentTotal\",\n    value: function getPaymentTotal() {\n      return (0, _util.roundToDecimalPlaces)(parseFloat(this.getPaymentSubtotal(), 10) + parseFloat(this.getPaymentVat(), 10));\n    }\n  }, {\n    key: \"handleCheckoutSubmit\",\n    value: function handleCheckoutSubmit(event) {\n      event.preventDefault();\n\n      var total = this.getPaymentTotal();\n\n      var rate = 1;\n      var method = this.props.checkout.paymentMethod;\n\n      if (method !== \"naira\") {\n        switch (this.getValidWallet()) {\n          case \"SBD\":\n            rate = this.props.app.rates[\"SBD\"];\n            method = \"SBD\";\n            break;\n\n          case \"STEEM\":\n            rate = this.props.app.rates[\"STEEM\"];\n            method = \"STEEM\";\n            break;\n        }\n      }\n\n      var placement_code = Math.random().toFixed(36).replace(/[^0-9]+/g, \"\").substr(1, 3) + \"-\" + Math.random().toString(36).replace(/[^a-z]+/g, \"\").substr(0, 3).toUpperCase();\n\n      var data = {\n        user_id: this.props.account.user.id,\n        total_amount: (0, _util.roundToDecimalPlaces)(total / rate, 3),\n        placement_code: placement_code,\n        delivery_address: this.props.checkout.deliveryAddress,\n        payment_mode: this.props.checkout.paymentMode,\n        rate: rate,\n        payment_method: method,\n        items: this.props.cart.items.map(function (item) {\n          return {\n            description: item.description,\n            photo: item.photo,\n            price: item.price,\n            qty: item.qty,\n            title: item.title,\n            vat: item.vat,\n            origin: item.origin,\n            locale: item.locale,\n            classification: item.classification,\n            item_id: item.id\n          };\n        })\n      };\n\n      // return console.log({\n      //   data,\n      //   wallet: this.getValidWallet(),\n      //   balance: this.getWalletBalance(this.getValidWallet())\n      // });\n\n      var setCheckoutStatusModalVisibility = this.props.setCheckoutStatusModalVisibility;\n\n      var self = this;\n      this.props.attemptOrderPlacement(data, function (order) {\n        var user = self.props.account.user;\n        var checkout = self.props.checkout;\n        var addresses = user.addresses;\n        var wallets = user.wallets;\n        var currentAddress = checkout.deliveryAddress;\n\n        self.setState({\n          latestPlacementCode: order.placement_code\n        });\n\n        if (self.props.checkout.paymentMode === \"on-demand\") {\n          var walletBalance = self.getWalletBalance(checkout.paymentMethod);\n\n          var newWalletBalance = walletBalance - Number(order.total_amount);\n\n          var wallet = _extends({}, self.getWallet(checkout.paymentMethod), {\n            balance: newWalletBalance\n          });\n\n          wallets = wallets.filter(function (wlt) {\n            return wlt.title !== wallet.title;\n          });\n\n          wallets = [].concat(_toConsumableArray(wallets), [wallet]);\n\n          localStorage.setItem(\"user\", JSON.stringify(_extends({}, user, {\n            wallets: wallets\n          })));\n\n          self.props.setUser({\n            user: _extends({}, user, {\n              wallets: wallets\n            })\n          });\n        }\n\n        if (addresses.length > 0) {\n          if (addresses.filter(function (address) {\n            return address.body === currentAddress;\n          }).length === 0) {\n            var newAddress = {\n              id: addresses.reduce(function (total, address) {\n                return Math.max(total, address.id) + 1;\n              }),\n              body: currentAddress,\n              user_id: user.id\n            };\n\n            addresses = [].concat(_toConsumableArray(addresses), [newAddress]);\n\n            localStorage.setItem(\"user\", JSON.stringify(_extends({}, user, {\n              addresses: addresses\n            })));\n\n            self.props.setUser({\n              user: _extends({}, user, {\n                addresses: addresses\n              })\n            });\n          }\n        } else {\n          var newAddress = {\n            id: 1,\n            body: currentAddress,\n            user_id: user.id\n          };\n\n          addresses = [].concat(_toConsumableArray(addresses), [newAddress]);\n\n          localStorage.setItem(\"user\", JSON.stringify(_extends({}, user, {\n            addresses: addresses\n          })));\n\n          self.props.setUser({\n            user: _extends({}, user, {\n              addresses: addresses\n            })\n          });\n        }\n\n        setCheckoutStatusModalVisibility({\n          isCheckoutStatusModalOpen: true\n        });\n\n        self.props.clearCart();\n      });\n    }\n  }], [{\n    key: \"fetchData\",\n    value: function fetchData(store, _ref) {\n      var path = _ref.path;\n\n      return store.dispatch((0, _actions.fetchCheckout)(path));\n    }\n  }, {\n    key: \"getReducer\",\n    value: function getReducer() {\n      return { key: _constants.REDUCER_NAME, reducer: _reducer.checkoutReducer };\n    }\n  }]);\n\n  return Checkout;\n}(_react2.default.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    app: (0, _reducer2.getAppState)(state).toJS(),\n    cart: (0, _reducer3.getCartState)(state).toJS(),\n    checkout: (0, _reducer.getCheckoutState)(state).toJS(),\n    account: (0, _reducer4.getAccountState)(state).toJS()\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onLoadCheckout: function onLoadCheckout(data) {\n      return dispatch((0, _actions.fetchCheckout)(data));\n    },\n    clearCart: function clearCart(data) {\n      return dispatch((0, _actions5.clearCart)());\n    },\n    setPaymentMethod: function setPaymentMethod(data) {\n      return dispatch((0, _actions.setPaymentMethod)(data));\n    },\n    setPaymentMode: function setPaymentMode(data) {\n      return dispatch((0, _actions.setPaymentMode)(data));\n    },\n    setUser: function setUser(data) {\n      return dispatch((0, _actions4.setUser)(data));\n    },\n    setDeliveryAddress: function setDeliveryAddress(data) {\n      return dispatch((0, _actions.setDeliveryAddress)(data));\n    },\n    setHeaderVisibility: function setHeaderVisibility(data) {\n      return dispatch((0, _actions2.setHeaderVisibility)(data));\n    },\n    setFooterVisibility: function setFooterVisibility(data) {\n      return dispatch((0, _actions3.setFooterVisibility)(data));\n    },\n    attemptOrderPlacement: function attemptOrderPlacement(data, callback) {\n      return dispatch((0, _actions.attemptOrderPlacement)(data, callback));\n    },\n    setCheckoutStatusModalVisibility: function setCheckoutStatusModalVisibility(data) {\n      return dispatch((0, _actions.setCheckoutStatusModalVisibility)(data));\n    }\n  };\n};\n\nvar withReducer = (0, _reducerInjector2.default)(_constants.REDUCER_NAME, _reducer.checkoutReducer)(Checkout);\n\nexports.default = (0, _reactRouterDom.withRouter)((0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(withReducer));\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/screens/checkout/index.js\n// module id = ./js/screens/checkout/index.js\n// module chunks = 7\n\n//# sourceURL=webpack:///./js/screens/checkout/index.js?");

/***/ })

});