webpackJsonp([1],{"./js/components/UI/ecosystems/BaseFundingModal.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("../node_modules/react/index.js"),o=a(s),r=n("../node_modules/prop-types/index.js"),l=a(r),i=n("../node_modules/pcln-design-system/dist/index.js"),u=n("./js/components/UI/atoms/index.js"),d=n("./js/components/UI/atoms/StyledModal.js"),c=n("./js/components/UI/molecules/index.js"),m=n("./js/components/UI/organisms/index.js"),f=n("./js/util/util.js"),p=function(e){return o.default.createElement(i.Flex,{p:2,flexDirection:"column",justify:"center",alignItems:"center",style:{height:"100%"}},o.default.createElement(u.CloseButton,{onClick:function(t){return e.onClose(t)}}),o.default.createElement(i.Flex,{justify:"center",alignItems:"center"},e.isAttemptingFunding?o.default.createElement(c.FundingConfirmationDisplay,null):o.default.createElement(m.BaseFundingForm,{paymentButtonText:"Pay Securely with "+("naira"===e.fundingMethod?"Paystack":"Steemconnect"),onFundingSubmit:function(t){return e.onFundingSubmit(t)},fundingMethod:e.fundingMethod,fundingMethodDisplayName:(0,f.toTitleCase)(e.fundingMethod),onSetFundingAmount:function(t){return e.onSetFundingAmount(t)},onSetFundingMethod:function(t){return e.onSetFundingMethod(t)},value:e.fundingAmount,isFundingInputFocused:e.isFundingModalOpen})))},y=function(e){return e.isFullscreenModal?o.default.createElement(d.StyledFullscreenModal,{pose:e.isFundingModalOpen?"fullscreen":"idle",style:{display:e.isFundingModalOpen?"block":"none"}},o.default.createElement(p,e)):o.default.createElement(u.StyledModal,{pose:e.isFundingModalOpen?"fullscreen":"idle",style:{display:e.isFundingModalOpen?"block":"none"}},o.default.createElement(p,e))};y.propTypes={isFundingModalOpen:l.default.bool,isFullscreenModal:l.default.bool},y.defaultProps={isFundingModalOpen:!1,isFullscreenModal:!1},t.default=y},"./js/components/UI/ecosystems/CartModal.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("../node_modules/react/index.js"),o=a(s),r=n("../node_modules/prop-types/index.js"),l=a(r),i=n("../node_modules/pcln-design-system/dist/index.js"),u=n("./js/components/UI/atoms/index.js"),d=n("./js/containers/feed/index.js"),c=a(d),m=function(e){return o.default.createElement(u.StyledModal,{pose:e.isCartModalOpen?"fullscreen":"idle",style:{display:e.isCartModalOpen?"block":"none"}},o.default.createElement(i.Flex,{alignItems:"center",justify:"center"},o.default.createElement(i.Flex,{p:2,flexDirection:"column",width:[1,.9,.7,.7]},o.default.createElement(i.Flex,{mb:2},o.default.createElement(i.Text,{fontSize:3,bold:!0,style:{flex:.999}},e.cartItems.length-1+" More",e.cartItems.length-1==1?" Treat":" Treats"),o.default.createElement(i.IconButton,{size:32,color:"#999",borderColor:"transparent",name:"close",onClick:function(t){return e.onSetCartModalStatus(!1)}})),o.default.createElement(i.Flex,{flexDirection:"column"},o.default.createElement(c.default,{items:e.cartItems,highlightSelectedItem:!1})))))};m.propTypes={isCartModalOpen:l.default.bool,cartItems:l.default.array},m.defaultProps={isCartModalOpen:!1,cartItems:[]},t.default=m},"./js/components/UI/ecosystems/CheckoutInfo.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=n("../node_modules/react/index.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),r=n("./js/components/UI/organisms/index.js"),l=n("../node_modules/pcln-design-system/dist/index.js"),i=function(e){return o.default.createElement(l.Flex,a({flexDirection:"column"},e),o.default.createElement(l.Heading,{fontSize:2,mb:1,bold:!0},"Complete Checkout"),o.default.createElement(l.Text,{fontSize:1,mb:3,color:"gray"},"Your last step. We promise."),o.default.createElement(l.Box,{mb:3},o.default.createElement(r.AddressInputCard,{userAddresses:e.userAddresses,address:e.address,isAddressEditable:e.isAddressEditable,isAddressInputDisabled:e.isAddressInputDisabled,onSetAddress:e.onSetAddress,onSetAddressInputDisabled:function(t){return e.onSetAddressInputDisabled(t)}})),e.isUserAuthenticated?o.default.createElement(l.Box,null,o.default.createElement(l.Box,{mb:3},o.default.createElement(r.PaymentCard,e)),o.default.createElement(l.Box,{mb:3},o.default.createElement(r.PaymentModeCard,e))):o.default.createElement(l.Box,{mb:3},o.default.createElement(r.AuthCard,e)))};t.default=i},"./js/components/UI/ecosystems/OrderSuccessModal.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("../node_modules/react/index.js"),o=a(s),r=n("../node_modules/prop-types/index.js"),l=(a(r),n("../node_modules/pcln-design-system/dist/index.js")),i=n("./js/components/UI/atoms/StyledModal.js"),u=a(i),d=function(e){return o.default.createElement(u.default,{pose:e.isModalOpen?"fullscreen":"idle",style:{display:e.isModalOpen?"block":"none"}},o.default.createElement(l.Flex,{p:2,flexDirection:"column",justify:"center",alignItems:"center",style:{height:"100%"}},o.default.createElement(l.Box,{mb:2},o.default.createElement(l.Text,{align:"center",fontSize:3,bold:!0},"Order Placed Successfully."),o.default.createElement(l.Text.p,{align:"center",fontSize:3},"You successfully placed an order with code Â ",o.default.createElement("b",null,e.placementCode),".")),o.default.createElement(l.Flex,{justify:"center"},o.default.createElement(l.Button,{onClick:function(t){return e.onViewActiveOrders(t)}},"View Active Orders"))))};t.default=d},"./js/components/UI/ecosystems/Summary.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=n("../node_modules/react/index.js"),r=a(o),l=n("../node_modules/prop-types/index.js"),i=a(l),u=n("../node_modules/pcln-design-system/dist/index.js"),d=n("./js/components/UI/molecules/index.js"),c=n("./js/util/util.js"),m=function(e){return r.default.createElement(u.Flex,s({flexDirection:"column"},e),r.default.createElement(d.CardHeading,{title:"Summary",onToggleClick:e.onSummaryToggleClick,isMinimized:e.isMinimized,expandLabel:"More Details",shrinkLabel:"Less Details"}),r.default.createElement(u.Flex,{flexDirection:"column",style:{height:e.isMinimized?0:"60px",overflowY:"hidden",transition:"height 0.3s ease-in-out"}},r.default.createElement(u.Flex,{mb:2},r.default.createElement(u.Text,{fontSize:1,regular:!0},"Subtotal"),r.default.createElement(u.Text,{color:"gray",ml:"auto",fontSize:1,regular:!0},e.subtotal)),r.default.createElement(u.Flex,{mb:3},r.default.createElement(u.Text,{fontSize:1,regular:!0},"VAT"),r.default.createElement(u.Text,{color:"gray",ml:"auto",fontSize:1,regular:!0},e.vat))),r.default.createElement(u.Flex,null,r.default.createElement(u.Text,{color:"gray",fontSize:1,bold:!0},"Total"),r.default.createElement(u.Text,{ml:"auto",fontSize:1,bold:!0},"naira"===e.paymentMethod&&"N",(0,c.roundToDecimalPlaces)(e.total),"naira"!==e.paymentMethod&&" "+e.paymentMethod)))};m.propTypes={isMinimized:i.default.bool,onSummaryToggleClick:i.default.func},m.defaultProps={isMinimized:!0},t.default=m},"./js/components/UI/ecosystems/index.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Summary=t.OrderSuccessModal=t.CheckoutInfo=t.CartModal=t.BaseFundingModal=void 0;var s=n("./js/components/UI/ecosystems/BaseFundingModal.js"),o=a(s),r=n("./js/components/UI/ecosystems/CartModal.js"),l=a(r),i=n("./js/components/UI/ecosystems/CheckoutInfo.js"),u=a(i),d=n("./js/components/UI/ecosystems/OrderSuccessModal.js"),c=a(d),m=n("./js/components/UI/ecosystems/Summary.js"),f=a(m);t.BaseFundingModal=o.default,t.CartModal=l.default,t.CheckoutInfo=u.default,t.OrderSuccessModal=c.default,t.Summary=f.default},"./js/components/UI/organisms/AddressInputCard.js":function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var s=n("../node_modules/react/index.js"),o=function(e){return e&&e.__esModule?e:{default:e}}(s),r=n("../node_modules/pcln-design-system/dist/index.js"),l=n("./js/components/UI/atoms/index.js"),i=n("./js/components/UI/molecules/index.js"),u=function(e){var t;return o.default.createElement(r.Card,{bg:"lightGray"},o.default.createElement(r.Box,{pt:2,pb:3,px:3},o.default.createElement(r.Flex,null,o.default.createElement(r.Flex,{style:{flex:4}},o.default.createElement(r.Text,{fontSize:2,bold:!0},e.cardTitle)),e.isAddressEditable&&o.default.createElement(r.Flex,{onClick:e.onSummaryToggleClick},o.default.createElement(r.Flex,{flexDirection:"column",justify:"center"},o.default.createElement(r.Icon,{mr:1,size:12,name:"modeEdit",color:"blue"})),o.default.createElement(r.Flex,{flexDirection:"column",justify:"center"},o.default.createElement(r.Link,{onClick:function(t){t.preventDefault(),e.onSetAddressInputDisabled(!1)},mr:1,color:"blue",fontSize:0},o.default.createElement(r.Text,{fontSize:0},"Change Address"))))),e.hasHint&&o.default.createElement(r.Flex,{mb:2},o.default.createElement(r.Text,{color:"gray",fontSize:0},"A correct address means faster delivery.")),e.userAddresses&&e.userAddresses.length>0?o.default.createElement(r.Box,null,o.default.createElement(i.AutocompleteAddressInput,e)):o.default.createElement(r.Box,null,o.default.createElement(l.Input,(t={id:"address",style:{background:"#fff"},onFocus:function(e){return e.target.select()},autoFocus:!0,autocomplete:"on",placeholder:"Example: Room 2, Cali Villa, Alaska",value:e.address,onChange:function(t){e.onSetAddress(t.target.value)}},a(t,"style",{backgroundColor:e.isAddressInputDisabled?"#eee":"#fff",color:"#999"}),a(t,"disabled",e.isAddressInputDisabled),a(t,"onBlur",function(t){return e.onSetAddressInputDisabled(!0)}),t)))))};u.defaultProps={hasHint:!0,isAddressEditable:!0,cardTitle:"Add an address"},t.default=u},"./js/components/UI/organisms/AuthCard.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("../node_modules/react/index.js"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("../node_modules/pcln-design-system/dist/index.js"),r=n("./js/components/UI/atoms/index.js"),l=(n("./js/components/UI/molecules/index.js"),function(e){return s.default.createElement(o.Card,{bg:"white",py:5},s.default.createElement(o.Flex,{flexDirection:"column"},s.default.createElement(o.Flex,{justify:"center",alignItems:"center"},s.default.createElement(o.Heading,{fontSize:2,bold:!0},"Login or Register to finish this.")),s.default.createElement(o.Flex,{py:2,justify:"center",alignItems:"center"},s.default.createElement(r.OutlineButton,{onClick:function(t){return e.history.push("/login")}},"Login to your account"))))});t.default=l},"./js/components/UI/organisms/BaseFundingForm.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("../node_modules/react/index.js"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("../node_modules/pcln-design-system/dist/index.js"),r=n("../node_modules/react-spinners/index.js"),l=n("./js/components/UI/atoms/index.js"),i=function(e){return s.default.createElement(o.Box,{width:[.8,.6,.5]},s.default.createElement("form",{method:"get",onSubmit:function(t){t.preventDefault(),e.onFundingSubmit(t)}},s.default.createElement(o.Flex,{flexDirection:"column",justify:"center",alignItems:"center"},s.default.createElement(o.Text,{fontSize:4,mb:3,style:{textAlign:"center"}},"Fund ",s.default.createElement("strong",null,e.fundingMethodDisplayName)," ",s.default.createElement("em",null,"Without Stress"),"."),s.default.createElement(o.Box,{mb:3},s.default.createElement(l.Label,{mb:1,fontSize:0},"Amount"),s.default.createElement(l.Input,{onChange:function(t){e.onSetFundingAmount({fundingAmount:Number(t.target.value)})},value:e.value,type:"number",id:"amount",min:0,step:"any",onFocus:function(e){return e.target.select()},autoFocus:e.isFundingInputFocused,style:{background:"#fff"}})),s.default.createElement(o.Box,{mb:3},s.default.createElement(o.Button,{disabled:e.isAttemptingFunding,type:"submit",fullWidth:!0,mb:1},e.isAttemptingFunding?s.default.createElement(r.SyncLoader,{color:"#f1f1f1",size:10,loading:!0}):s.default.createElement(o.Text,null,e.paymentButtonText)),e.isAttemptingFunding&&s.default.createElement(o.Text,{color:"gray",fontSize:0},"Going to PayStack's secure payment portal within 10s...")))))};i.defaultProps={paymentButtonText:"Pay Securely with SteemConnect"},t.default=i},"./js/components/UI/organisms/CartEmptyState.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=n("../node_modules/react/index.js"),o=a(s),r=n("../node_modules/prop-types/index.js"),l=(a(r),n("../node_modules/pcln-design-system/dist/index.js")),i=n("./js/components/UI/atoms/index.js"),u=function(e){return o.default.createElement(l.Flex,{px:3,flexDirection:"column",justify:"center",style:{height:"80%",position:"absolute",width:"100%"}},o.default.createElement(l.Flex,{flexDirection:"column",justify:"center",alignItems:"center",style:{textAlign:"center"}},o.default.createElement(l.Text,{fontSize:4,mb:3,bold:!0},"Please fill me."),o.default.createElement(l.Text,{mb:3},"Add tons of delightful treats to your cart below."),o.default.createElement(l.Flex,{justify:"center",alignItems:"center"},o.default.createElement(i.OutlineButton,{onClick:function(t){return e.onShowTreatsButtonClick(t)}},"See treats for your cart"))))};t.default=u},"./js/components/UI/organisms/PaymentCard.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("../node_modules/react/index.js"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("../node_modules/pcln-design-system/dist/index.js"),r=n("./js/components/UI/molecules/index.js"),l=n("./js/util/util.js"),i=function(e){var t=(0,l.roundToDecimalPlaces)(e.getWalletBalance("STEEM"),3),n=(0,l.roundToDecimalPlaces)(e.getWalletBalance("SBD"),3),a=(0,l.roundToDecimalPlaces)(e.getWalletBalance("naira"),3),i=e.rates.STEEM,u=e.rates.SBD,d=a>0,c=t>0,m=n>0;return s.default.createElement(o.Card,{bg:"lightGray"},s.default.createElement(o.Flex,{flexDirection:"column",pt:2,pb:3,px:3},s.default.createElement(r.CardHeading,{title:"Change Pay Method",onToggleClick:e.onPaymentToggleClick,isMinimized:e.isPaymentMinimized}),s.default.createElement(o.Box,{style:{height:e.isPaymentMinimized?"45px":"140px",overflowY:"hidden",transition:"height 0.3s ease-in-out"}},s.default.createElement(r.PaymentChoice,{choice:"naira",isActivePaymentMethod:"naira"===e.activePaymentMethod,message:"Pay N"+(0,l.roundToDecimalPlaces)(e.amount,3)+" Cash",onSetActivePaymentMethod:function(t){return e.onSetActivePaymentMethod("naira")}}),s.default.createElement(r.PaymentChoice,{choice:"STEEM",isActivePaymentMethod:"STEEM"===e.activePaymentMethod,message:"Pay "+(0,l.roundToDecimalPlaces)(e.amount/i,3)+" STEEM",onSetActivePaymentMethod:function(t){return e.onSetActivePaymentMethod("STEEM")}}),s.default.createElement(r.PaymentChoice,{choice:"SBD",isActivePaymentMethod:"SBD"===e.activePaymentMethod,message:"Pay "+(0,l.roundToDecimalPlaces)(e.amount/u,3)+" SBD",onSetActivePaymentMethod:function(t){return e.onSetActivePaymentMethod("SBD")}})),(c||m)&&s.default.createElement(o.Text,{color:"gray",fontSize:0,mb:1},s.default.createElement("b",null,c&&t+" STEEM "),c&&m&&"& ",s.default.createElement("b",null,m&&n+" SBD "),"available in wallet"),d&&s.default.createElement(o.Text,{color:"gray",fontSize:0},"You have ",s.default.createElement("b",null,d&&"NGN "+a," "),"available.")))};t.default=i},"./js/components/UI/organisms/PaymentModeCard.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("../node_modules/react/index.js"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),o=n("../node_modules/pcln-design-system/dist/index.js"),r=n("./js/components/UI/molecules/index.js"),l=n("./js/components/UI/atoms/index.js"),i=function(e){return s.default.createElement(o.Card,{bg:"lightGray"},s.default.createElement(o.Box,{pt:2,pb:3,px:3},s.default.createElement(r.CardHeading,{title:"Payment Mode",onToggleClick:e.onPaymentModeToggleClick,isMinimized:e.isPaymentModeMinimized}),s.default.createElement(o.Box,{style:{height:e.isPaymentModeMinimized?"23px":"65px",overflow:"hidden",transition:"height 0.3s ease-in-out"}},s.default.createElement(l.Label,{regular:!0,fontSize:2},s.default.createElement(o.Flex,null,s.default.createElement(l.Radio,{value:"on-demand",id:"on-demand",name:"payment-mode",onChange:function(t){return e.onSetActivePaymentMode(t.target.value)},checked:"on-demand"===e.activePaymentMode}),s.default.createElement(o.Text,{ml:2},"Pay immediately (on demand)"))),s.default.createElement(l.Label,{htmlFor:"on-delivery",regular:!0,fontSize:2},s.default.createElement(o.Flex,null,s.default.createElement(l.Radio,{value:"on-delivery",id:"on-delivery",name:"payment-mode",onChange:function(t){return e.onSetActivePaymentMode(t.target.value)},checked:"on-delivery"===e.activePaymentMode}),s.default.createElement(o.Text,{ml:2},"Pay later (on delivery)")))),s.default.createElement(o.Flex,null)))};t.default=i},"./js/components/UI/organisms/index.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFundingForm=t.PaymentModeCard=t.PaymentCard=t.CartEmptyState=t.AddressInputCard=t.AuthCard=void 0;var s=n("./js/components/UI/organisms/AddressInputCard.js"),o=a(s),r=n("./js/components/UI/organisms/AuthCard.js"),l=a(r),i=n("./js/components/UI/organisms/CartEmptyState.js"),u=a(i),d=n("./js/components/UI/organisms/PaymentCard.js"),c=a(d),m=n("./js/components/UI/organisms/PaymentModeCard.js"),f=a(m),p=n("./js/components/UI/organisms/BaseFundingForm.js"),y=a(p);t.AuthCard=l.default,t.AddressInputCard=o.default,t.CartEmptyState=u.default,t.PaymentCard=c.default,t.PaymentModeCard=f.default,t.BaseFundingForm=y.default},"./js/screens/checkout/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCheckout=t.setCheckoutStatusModalVisibility=t.setCheckoutAttemptingStatus=t.setDeliveryAddress=t.setPaymentMode=t.setPaymentMethod=t.attemptOrderPlacement=void 0;var a=n("./js/screens/checkout/constants.js"),s=n("../service/service.js"),o=n("./js/services/ApiService/index.js"),r=n("./js/containers/app/actions.js"),l=n("./js/screens/account/actions.js"),i="https://instachaw.com"===window.location.origin?"https://api.instachaw.com":"http://localhost:3333",u=(t.attemptOrderPlacement=function(e,t){return function(n){n(d({isAttemptingCheckout:!0})),(0,o.sendRequest)({endpoint:i+"/api/v1/orders",method:"POST",payload:JSON.stringify(e)}).then(function(e){if(void 0!==e&&null!==e)return n((0,l.addUserOrder)({order:e})),n(d({isAttemptingCheckout:!1})),t(e);setTimeout(function(){n(d({isAttemptingCheckout:!1}))},1e3)}).catch(function(e){return console.log(e)})}},function(e){return{type:a.SET_CHECKOUT,data:e}}),d=(t.setPaymentMethod=function(e){return{type:a.SET_PAYMENT_METHOD,data:e}},t.setPaymentMode=function(e){return{type:a.SET_PAYMENT_MODE,data:e}},t.setDeliveryAddress=function(e){return{type:a.SET_DELIVERY_ADDRESS,data:e}},t.setCheckoutAttemptingStatus=function(e){return{type:a.SET_CHECKOUT_ATTEMPTING_STATUS,data:e}});t.setCheckoutStatusModalVisibility=function(e){return{type:a.SET_CHECKOUT_STATUS,data:e}},t.fetchCheckout=function(e){return function(t){return t((0,r.isLoading)(!0)),(0,s.getPageData)(e).then(function(e){return t((0,r.setMeta)(e.meta)),t((0,r.setUrl)(e.url)),t((0,r.setTitle)(e.title)),e}).then(function(e){t((0,r.isLoading)(!1)),t(u(e))}).catch(function(e){throw console.error(e),e})}}},"./js/screens/checkout/index.js":function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=(Object.assign,function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),i=n("../node_modules/react/index.js"),u=a(i),d=n("../node_modules/prop-types/index.js"),c=(a(d),n("../node_modules/react-redux/es/index.js")),m=n("../node_modules/react-spinners/index.js"),f=n("../node_modules/pcln-design-system/dist/index.js"),p=n("../node_modules/react-router-dom/es/index.js"),y=n("./js/redux/reducerInjector.js"),h=a(y),j=n("./js/screens/checkout/constants.js"),g=n("./js/screens/checkout/actions.js"),M=n("./js/screens/checkout/reducer.js"),v=n("./js/containers/app/reducer.js"),b=n("./js/containers/header/actions.js"),E=n("./js/containers/footer/actions.js"),x=n("./js/screens/cart/reducer.js"),S=n("./js/screens/store/reducer.js"),P=n("./js/screens/account/actions.js"),C=n("./js/screens/account/reducer.js"),A=n("./js/screens/cart/actions.js"),_=(n("./js/components/UI/atoms/index.js"),n("./js/components/UI/molecules/index.js"),n("./js/components/UI/organisms/index.js")),k=n("./js/components/UI/ecosystems/index.js"),T=n("./js/containers/feed/index.js"),I=(a(T),n("./js/util/util.js"),n("./js/services/UserService/index.js")),F=a(I),O=n("./js/services/CheckoutService/index.js"),D=a(O),U=function(e){function t(e){s(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isSummaryMinimized:!0,isPaymentMinimized:!1,isPaymentModeMinimized:!1,paymentMethod:"STEEM",paymentMode:"on-demand",address:"Room 3, Vanessa Suite, Alaska",isAddressInputDisabled:!0,latestPlacementCode:""},n.setActivePaymentMethod=n.setActivePaymentMethod.bind(n),n.setActivePaymentMode=n.setActivePaymentMode.bind(n),n.handleCheckoutSubmit=n.handleCheckoutSubmit.bind(n),n}return r(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setHeaderVisibility,n=e.setFooterVisibility,a=e.onLoadCheckout,s=e.match,o=e.app,r=e.account,l=e.cart;o.url!==s.url&&a(s.path),setTimeout(function(){t({isHeaderVisible:!1}),n({isFooterVisible:!1})},200),this.userService=new F.default(r.user),this.checkoutService=new D.default(l)}},{key:"componentWillUnmount",value:function(){this.setActivePaymentMethod=null,this.setActivePaymentMode=null,this.handleCheckoutSubmit=null,this.props.setCheckoutStatusModalVisibility({isCheckoutStatusModalOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,a=t.app,s=(t.attemptOrdePlacement,t.cart),o=t.checkout,r=t.history,l=(t.setCheckoutStatusModalVisibility,o.deliveryAddress,o.isAttemptingCheckout),i=o.isCheckoutStatusModalOpen,d=o.paymentMethod,c=(o.paymentMode,new F.default(n.user)),p=new D.default(s),y=a.rates[d],h=p.calculateOrderTotal(y);c.retrieveWalletBalance(d);return s.items.length>0||i?u.default.createElement(f.Flex,{mt:3,px:3,flexDirection:"column"},u.default.createElement(k.OrderSuccessModal,{isModalOpen:i,placementCode:this.state.latestPlacementCode,onViewActiveOrders:function(e){return r.push("/account/orders")}}),u.default.createElement(f.Flex,{justify:"center",alignItems:"center"},u.default.createElement(f.Box,{width:[1,.9,.7,.7]},u.default.createElement(f.Flex,{style:{display:i?"none":"block"}},u.default.createElement("form",null,u.default.createElement(k.CheckoutInfo,{rates:a.rates,amount:h,getWalletBalance:function(e){return c.retrieveWalletBalance(e)},address:o.deliveryAddress,onSetAddress:function(t){return e.props.setDeliveryAddress({deliveryAddress:t})},onSetAddressInputDisabled:function(t){e.setState({isAddressInputDisabled:t})},isAddressInputDisabled:this.state.isAddressInputDisabled,onSetActivePaymentMethod:this.setActivePaymentMethod,onSetActivePaymentMode:this.setActivePaymentMode,activePaymentMethod:o.paymentMethod,onPaymentToggleClick:function(t){return e.setState({isPaymentMinimized:!e.state.isPaymentMinimized})},onPaymentModeToggleClick:function(t){return e.setState({isPaymentModeMinimized:!e.state.isPaymentModeMinimized})},isPaymentMinimized:this.state.isPaymentMinimized,isPaymentModeMinimized:this.state.isPaymentModeMinimized,activePaymentMode:o.paymentMode,userAddresses:null!==n.user?n.user.addresses:[],isUserAuthenticated:null!==n.user}),u.default.createElement(f.GreenButton,{disabled:l||!this.isValidForm(),style:{cursor:"pointer"},mb:4,onClick:this.handleCheckoutSubmit,fullWidth:!0},l?u.default.createElement(m.SyncLoader,{color:"#f1f1f1",size:10,loading:!0}):u.default.createElement(f.Text,null,"Place Order"))))))):u.default.createElement(_.CartEmptyState,{onShowTreatsButtonClick:function(t){r.push(void 0===e.props.store.activeStore.id?"/store/1":"/store/"+e.props.store.activeStore.id)}})}},{key:"isValidForm",value:function(){return this.props.checkout.deliveryAddress.length>1}},{key:"setActivePaymentMode",value:function(e){this.props.setPaymentMode({paymentMode:e})}},{key:"setActivePaymentMethod",value:function(e){this.props.setPaymentMethod({paymentMethod:e})}},{key:"handleCheckoutSubmit",value:function(e){var t=this.props,n=(t.account,t.app),a=(t.attemptOrderPlacement,t.cart),s=t.checkout,o=(t.setCheckoutStatusModalVisibility,s.deliveryAddress,s.paymentMethod),r=s.paymentMode,l=n.rates[o],i=this.checkoutService.calculateOrderTotalWithRate(l),u=this.userService.retrieveWalletBalance(o);if("on-demand"===r&&u<i)return alert("You need at least "+i+" "+o+" in your wallet to place your order.");this.checkoutService.generatePlacementCode();return alert(JSON.stringify(a.items)),e.preventDefault(),!1}}],[{key:"fetchData",value:function(e,t){var n=t.path;return e.dispatch((0,g.fetchCheckout)(n))}},{key:"getReducer",value:function(){return{key:j.REDUCER_NAME,reducer:M.checkoutReducer}}}]),t}(u.default.PureComponent),B=function(e){return{app:(0,v.getAppState)(e).toJS(),cart:(0,x.getCartState)(e).toJS(),checkout:(0,M.getCheckoutState)(e).toJS(),account:(0,C.getAccountState)(e).toJS(),store:(0,S.getStoreState)(e).toJS()}},w=function(e){return{onLoadCheckout:function(t){return e((0,g.fetchCheckout)(t))},clearCart:function(t){return e((0,A.clearCart)())},setPaymentMethod:function(t){return e((0,g.setPaymentMethod)(t))},setPaymentMode:function(t){return e((0,g.setPaymentMode)(t))},setUser:function(t){return e((0,P.setUser)(t))},setDeliveryAddress:function(t){return e((0,g.setDeliveryAddress)(t))},setHeaderVisibility:function(t){return e((0,b.setHeaderVisibility)(t))},setFooterVisibility:function(t){return e((0,E.setFooterVisibility)(t))},attemptOrderPlacement:function(t,n){return e((0,g.attemptOrderPlacement)(t,n))},setCheckoutStatusModalVisibility:function(t){return e((0,g.setCheckoutStatusModalVisibility)(t))}}},z=(0,h.default)(j.REDUCER_NAME,M.checkoutReducer)(U);t.default=(0,p.withRouter)((0,c.connect)(B,w)(z))},"./js/services/CheckoutService/index.js":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n("./js/util/util.js"),r=function(){function e(t){a(this,e),this.cart=t}return s(e,[{key:"generatePlacementCode",value:function(){return Math.random().toFixed(36).replace(/[^0-9]+/g,"").substr(1,3)+"-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,3).toUpperCase()}},{key:"calculateOrderSubtotal",value:function(){return(0,o.roundToDecimalPlaces)(this.cart.items.reduce(function(e,t){return e+parseFloat(t.price)*parseInt(t.qty,10)},0))}},{key:"calculateOrderVat",value:function(){var e=(0,o.roundToDecimalPlaces)(this.cart.items.reduce(function(e,t){return e+parseFloat(t.vat)*parseInt(t.qty,10)},0));return(0,o.isANumber)(e)?e:0}},{key:"calculateOrderTotal",value:function(){var e=this.calculateOrderVat();return e=(0,o.isANumber)(e)?e:0,this.calculateOrderSubtotal()+e}},{key:"calculateOrderTotalWithRate",value:function(e){return(0,o.roundToDecimalPlaces)(this.calculateOrderTotal()/e)}}]),e}();t.default=r},"./js/services/UserService/index.js":function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=n("./js/util/util.js"),i=function(){function e(t){s(this,e),this.user=t}return r(e,[{key:"retrieveWallet",value:function(e){return null!==this.user?this.user.wallets.filter(function(t){return t.title===e})[0]:{}}},{key:"retrieveWalletBalance",value:function(e){var t=this.retrieveWallet(e).balance;return(0,l.isANumber)(t)?t:0}},{key:"debitAmountFromWallet",value:function(e,t,n){var s=this.retrieveWallet(e),r=Number(s.balance)-Number(t);s=o({},s,{balance:r});var l=this.user.wallets.filter(function(e){return e.title!==s.title}),i=[].concat(a(l),[s]);localStorage.setItem("user",JSON.stringify(o({},this.user,{wallets:i}))),n(i)}},{key:"hasEmptyAddressBook",value:function(){return 0===this.user.addresses.length}},{key:"hasAddress",value:function(e){return 0!==this.user.addresses.filter(function(t){return t.body===e}).length}},{key:"addToAddressBook",value:function(e,t){var n=this.user.addresses.reduce(function(e,t){return Math.max(e,t.id)+1}),s={id:n,body:e,user_id:this.user.id},r=[].concat(a(this.user.addresses),[s]);localStorage.setItem("user",JSON.stringify(o({},user,{addresses:r}))),t()}}]),e}();t.default=i}});