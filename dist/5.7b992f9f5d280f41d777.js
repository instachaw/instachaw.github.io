webpackJsonp([5],{

/***/ "./js/screens/register/actions.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setRegistrationAttemptingStatus = exports.fetchRegister = exports.attemptRegistration = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _actions = __webpack_require__(\"./js/containers/app/actions.js\");\n\nvar _service = __webpack_require__(\"../service/service.js\");\n\nvar _constants = __webpack_require__(\"./js/screens/register/constants.js\");\n\nvar _actions2 = __webpack_require__(\"./js/screens/account/actions.js\");\n\nvar _actions3 = __webpack_require__(\"./js/screens/login/actions.js\");\n\nvar _ApiService = __webpack_require__(\"./js/services/ApiService/index.js\");\n\nvar HOST_URL = window.location.origin === \"https://instachaw.com\" ? \"https://api.instachaw.com\" : \"http://localhost:3333\";\n\nvar attemptRegistration = exports.attemptRegistration = function attemptRegistration(data, cb) {\n  return function (dispatch) {\n    var endpoint = \"api/v1/users\";\n    dispatch(setRegistrationAttemptingStatus({\n      isAttemptingRegistration: true\n    }));\n\n    return (0, _ApiService.sendRequest)({\n      endpoint: HOST_URL + \"/\" + endpoint,\n      method: \"POST\",\n      payload: JSON.stringify(data)\n    }).then(function (response) {\n      if (typeof response !== \"undefined\" && typeof response !== null) {\n        if (typeof response.user !== \"undefined\") {\n          var user = response.user,\n              token = response.token;\n\n          var userData = _extends({}, user, {\n            token: token\n          });\n\n          dispatch((0, _actions2.setUser)({\n            user: userData\n          }));\n\n          localStorage.setItem(\"user\", JSON.stringify(userData));\n\n          dispatch((0, _actions3.setLoginStatus)({\n            isLoggedIn: true\n          }));\n\n          dispatch(setRegistrationAttemptingStatus({\n            isAttemptingRegistration: false\n          }));\n        } else {\n          setTimeout(function () {\n            dispatch(setRegistrationAttemptingStatus({\n              isAttemptingRegistration: false\n            }));\n          }, 1000);\n        }\n      } else {\n        setTimeout(function () {\n          dispatch(setRegistrationAttemptingStatus({\n            isAttemptingRegistration: false\n          }));\n        }, 1000);\n      }\n\n      return cb(response);\n    }).catch(function (e) {\n      return console.log(e);\n    });\n  };\n};\n\nvar fetchRegister = exports.fetchRegister = function fetchRegister(data) {\n  return function (dispatch) {\n    dispatch((0, _actions.isLoading)(true));\n\n    return (0, _service.getPageData)(data).then(function (response) {\n      dispatch((0, _actions.setMeta)(response.meta));\n      dispatch((0, _actions.setUrl)(response.url));\n      dispatch((0, _actions.setTitle)(response.title));\n      return response;\n    }).then(function (response) {\n      dispatch((0, _actions.isLoading)(false));\n      dispatch(loadRegister(response));\n    }).catch(function (error) {\n      console.error(error);\n      throw error;\n    });\n  };\n};\n\nvar setRegistrationAttemptingStatus = exports.setRegistrationAttemptingStatus = function setRegistrationAttemptingStatus(data) {\n  return {\n    type: _constants.SET_REGISTRATION_ATTEMPTING_STATUS,\n    data: data\n  };\n};\n\nvar loadRegister = function loadRegister(data) {\n  return {\n    type: _constants.SET_REGISTER,\n    data: data\n  };\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/screens/register/actions.js\n// module id = ./js/screens/register/actions.js\n// module chunks = 5\n\n//# sourceURL=webpack:///./js/screens/register/actions.js?");

/***/ }),

/***/ "./js/screens/register/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(\"../node_modules/react/index.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(\"../node_modules/prop-types/index.js\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = __webpack_require__(\"../node_modules/react-redux/es/index.js\");\n\nvar _reactSpinners = __webpack_require__(\"../node_modules/react-spinners/index.js\");\n\nvar _reducerInjector = __webpack_require__(\"./js/redux/reducerInjector.js\");\n\nvar _reducerInjector2 = _interopRequireDefault(_reducerInjector);\n\nvar _reactRouterDom = __webpack_require__(\"../node_modules/react-router-dom/es/index.js\");\n\nvar _reducer = __webpack_require__(\"./js/containers/app/reducer.js\");\n\nvar _actions = __webpack_require__(\"./js/containers/header/actions.js\");\n\nvar _actions2 = __webpack_require__(\"./js/containers/footer/actions.js\");\n\nvar _actions3 = __webpack_require__(\"./js/screens/register/actions.js\");\n\nvar _constants = __webpack_require__(\"./js/screens/register/constants.js\");\n\nvar _reducer2 = __webpack_require__(\"./js/screens/register/reducer.js\");\n\nvar _pclnDesignSystem = __webpack_require__(\"../node_modules/pcln-design-system/dist/index.js\");\n\nvar _atoms = __webpack_require__(\"./js/components/UI/atoms/index.js\");\n\nvar _styledComponents = __webpack_require__(\"../node_modules/styled-components/dist/styled-components.browser.es.js\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Register = function (_React$PureComponent) {\n  _inherits(Register, _React$PureComponent);\n\n  function Register(props) {\n    _classCallCheck(this, Register);\n\n    var _this = _possibleConstructorReturn(this, (Register.__proto__ || Object.getPrototypeOf(Register)).call(this, props));\n\n    _this.state = {\n      email: \"\",\n      username: \"\",\n      name: \"\",\n      password: \"\",\n      phone: \"\",\n      registrationNotice: \"\"\n    };\n    _this.handleRegistrationSubmit = _this.handleRegistrationSubmit.bind(_this);\n    _this.navigateToLocation = _this.navigateToLocation.bind(_this);\n    return _this;\n  }\n\n  _createClass(Register, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _props = this.props,\n          setHeaderVisibility = _props.setHeaderVisibility,\n          setFooterVisibility = _props.setFooterVisibility,\n          onLoadRegister = _props.onLoadRegister,\n          match = _props.match;\n\n\n      setTimeout(function () {\n        setHeaderVisibility({\n          isHeaderVisible: false\n        });\n        setFooterVisibility({\n          isFooterVisible: false\n        });\n      }, 200);\n\n      onLoadRegister(match.path);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        {\n          px: 3,\n          py: 3,\n          flexDirection: \"column\",\n          justify: \"center\",\n          style: {\n            position: \"absolute\",\n            height: \"100%\",\n            left: \"50%\",\n            transform: \"translateX(-50%)\"\n          },\n          width: [1, 0.9, 0.7]\n        },\n        _react2.default.createElement(\n          \"form\",\n          { method: \"get\", onSubmit: this.handleRegistrationSubmit },\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            { flexDirection: \"column\", justify: \"center\", alignItems: \"center\" },\n            _react2.default.createElement(\n              _pclnDesignSystem.Flex,\n              { mb: 3, alignItems: \"center\", justify: \"center\" },\n              _react2.default.createElement(_atoms.BrandLogo, { height: \"45px\", color: \"red\" })\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 3 },\n              _react2.default.createElement(\n                _atoms.Label,\n                { mb: 1, fontSize: 0 },\n                \"Email \",\n                _react2.default.createElement(\n                  \"sup\",\n                  { style: { color: \"red\" } },\n                  \"*\"\n                )\n              ),\n              _react2.default.createElement(_atoms.Input, {\n                onChange: function onChange(e) {\n                  return _this2.setState({\n                    email: e.target.value\n                  });\n                },\n                value: this.state.email,\n                id: \"email\",\n                type: \"email\"\n              })\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 3 },\n              _react2.default.createElement(\n                _atoms.Label,\n                { mb: 1, fontSize: 0 },\n                \"Phone \",\n                _react2.default.createElement(\n                  \"sup\",\n                  { style: { color: \"red\" } },\n                  \"*\"\n                )\n              ),\n              _react2.default.createElement(_atoms.Input, {\n                onChange: function onChange(e) {\n                  return _this2.setState({\n                    phone: e.target.value\n                  });\n                },\n                value: this.state.phone,\n                id: \"phone\",\n                type: \"number\"\n              })\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 3 },\n              _react2.default.createElement(\n                _atoms.Label,\n                { mb: 1, fontSize: 0 },\n                \"Fullname \",\n                _react2.default.createElement(\n                  \"sup\",\n                  { style: { color: \"red\" } },\n                  \"*\"\n                )\n              ),\n              _react2.default.createElement(_atoms.Input, {\n                type: \"text\",\n                onChange: function onChange(e) {\n                  return _this2.setState({\n                    name: e.target.value\n                  });\n                },\n                value: this.state.name,\n                id: \"name\"\n              }),\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { fontSize: 0 },\n                \"Something like 'John Robert'.\"\n              )\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 3 },\n              _react2.default.createElement(\n                _atoms.Label,\n                { mb: 1, fontSize: 0 },\n                \"Username \",\n                _react2.default.createElement(\n                  \"sup\",\n                  { style: { color: \"red\" } },\n                  \"*\"\n                )\n              ),\n              _react2.default.createElement(_atoms.Input, {\n                type: \"text\",\n                onChange: function onChange(e) {\n                  return _this2.setState({\n                    username: e.target.value\n                  });\n                },\n                value: this.state.username,\n                id: \"username\"\n              })\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: this.state.registrationNotice.length > 1 ? 1 : 3 },\n              _react2.default.createElement(\n                _atoms.Label,\n                { mb: 1, fontSize: 0 },\n                \"Password \",\n                _react2.default.createElement(\n                  \"sup\",\n                  { style: { color: \"red\" } },\n                  \"*\"\n                )\n              ),\n              _react2.default.createElement(_atoms.Input, {\n                onChange: function onChange(e) {\n                  return _this2.setState({\n                    password: e.target.value\n                  });\n                },\n                value: this.state.password,\n                type: \"password\",\n                id: \"password\"\n              })\n            ),\n            this.state.registrationNotice.length > 0 && _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 3 },\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { align: \"right\", fontSize: 0, color: \"red\" },\n                this.state.registrationNotice\n              )\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              null,\n              _react2.default.createElement(\n                _atoms.Button,\n                {\n                  disabled: this.props.register.isAttemptingRegistration || !this.isValidForm(),\n                  fullWidth: true\n                },\n                !this.props.register.isAttemptingRegistration ? _react2.default.createElement(\n                  _pclnDesignSystem.Text,\n                  null,\n                  \"Create account instantly\"\n                ) : _react2.default.createElement(_reactSpinners.SyncLoader, { color: \"#f1f1f1\", size: 10, loading: true })\n              ),\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { my: 1, align: \"center\" },\n                \"or\"\n              ),\n              _react2.default.createElement(\n                _pclnDesignSystem.BlockLink,\n                {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  color: \"gray\",\n                  onClick: function onClick(e) {\n                    return _this2.navigateToLocation(\"/login\");\n                  }\n                },\n                _react2.default.createElement(\n                  _pclnDesignSystem.Text,\n                  {\n                    color: \"blue\",\n                    style: {\n                      textDecoration: \"underline\"\n                    }\n                  },\n                  \"Proceed to Login\"\n                )\n              )\n            )\n          )\n        )\n      );\n    }\n  }, {\n    key: \"handleRegistrationSubmit\",\n    value: function handleRegistrationSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var _state = this.state,\n          username = _state.username,\n          name = _state.name,\n          email = _state.email,\n          password = _state.password,\n          phone = _state.phone;\n\n\n      this.props.attemptRegistration({\n        username: username,\n        name: name,\n        email: email,\n        password: password,\n        phone: phone\n      }, function (response) {\n        if (typeof response !== \"undefined\") {\n          typeof response.user === \"undefined\" ? _this3.setState({\n            registrationNotice: response[0].message\n          }) : _this3.navigateToLocation(\"/\");\n        }\n      });\n    }\n  }, {\n    key: \"navigateToLocation\",\n    value: function navigateToLocation(location) {\n      this.props.history.push(location);\n    }\n  }, {\n    key: \"isValidForm\",\n    value: function isValidForm() {\n      var fields = [\"username\", \"name\", \"email\", \"password\", \"phone\"];\n\n      return this.state[fields[0]].length && this.state[fields[1]].length && this.state[fields[2]].length && this.state[fields[3]].length && this.state[fields[4]].length;\n    }\n  }]);\n\n  return Register;\n}(_react2.default.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    register: (0, _reducer2.getRegisterState)(state).toJS()\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onLoadRegister: function onLoadRegister(data) {\n      return dispatch((0, _actions3.fetchRegister)(data));\n    },\n    attemptRegistration: function attemptRegistration(data, cb) {\n      return dispatch((0, _actions3.attemptRegistration)(data, cb));\n    },\n    setHeaderVisibility: function setHeaderVisibility(data) {\n      return dispatch((0, _actions.setHeaderVisibility)(data));\n    },\n    setFooterVisibility: function setFooterVisibility(data) {\n      return dispatch((0, _actions2.setFooterVisibility)(data));\n    }\n  };\n};\n\nvar withReducer = (0, _reducerInjector2.default)(_constants.REDUCER_NAME, _reducer2.registerReducer)(Register);\nexports.default = (0, _reactRouterDom.withRouter)((0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(withReducer));\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/screens/register/index.js\n// module id = ./js/screens/register/index.js\n// module chunks = 5\n\n//# sourceURL=webpack:///./js/screens/register/index.js?");

/***/ })

});