webpackJsonp([4],{

/***/ "./js/screens/reset/actions.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetchReset = exports.attemptPasswordReset = undefined;\n\nvar _actions = __webpack_require__(\"./js/containers/app/actions.js\");\n\nvar _service = __webpack_require__(\"../service/service.js\");\n\nvar _constants = __webpack_require__(\"./js/screens/reset/constants.js\");\n\nvar _ApiService = __webpack_require__(\"./js/services/ApiService/index.js\");\n\nvar attemptPasswordReset = exports.attemptPasswordReset = function attemptPasswordReset(data) {\n  return function (dispatch) {\n    dispatch(setResetAttemptingStatus({\n      isAttemptingReset: true\n    }));\n    (0, _ApiService.sendRequest)({\n      endpoint: \"http://localhost:3333/api/v1/auth/forgotPassword\",\n      method: \"POST\",\n      payload: JSON.stringify(data)\n    }).then(function (response) {\n      if (typeof response !== \"undefined\") {\n        if (typeof response.messages !== \"undefined\") {\n          dispatch(setRecoveryNotice({\n            notice: response.messages[0].message\n          }));\n          setTimeout(function () {\n            dispatch(setResetAttemptingStatus({\n              isAttemptingReset: false\n            }));\n          }, 1000);\n        }\n\n        if (typeof response.data !== \"undefined\") {\n          dispatch(setRecoveryEmail({\n            email: response.data.user[0].email\n          }));\n\n          dispatch(setResetModalStatus({\n            isResetStatusModalOpen: true\n          }));\n        }\n      } else {\n        setTimeout(function () {\n          dispatch(setResetAttemptingStatus({\n            isAttemptingReset: false\n          }));\n        }, 1000);\n      }\n    }).catch(function (e) {\n      return console.log(e);\n    });\n  };\n};\n\nvar fetchReset = exports.fetchReset = function fetchReset(data) {\n  return function (dispatch) {\n    dispatch((0, _actions.isLoading)(true));\n\n    return (0, _service.getPageData)(data).then(function (response) {\n      dispatch((0, _actions.setMeta)(response.meta));\n      dispatch((0, _actions.setUrl)(response.url));\n      dispatch((0, _actions.setTitle)(response.title));\n      return response;\n    }).then(function (response) {\n      dispatch((0, _actions.isLoading)(false));\n      dispatch(loadReset(response));\n    }).catch(function (error) {\n      console.error(error);\n      throw error;\n    });\n  };\n};\n\nvar loadReset = function loadReset(data) {\n  return {\n    type: _constants.SET_RESET,\n    data: data\n  };\n};\n\nvar setResetModalStatus = function setResetModalStatus(data) {\n  return {\n    type: _constants.SET_RESET_MODAL_STATUS,\n    data: data\n  };\n};\n\nvar setResetAttemptingStatus = function setResetAttemptingStatus(data) {\n  return {\n    type: _constants.SET_RESET_ATTEMPTING_STATUS,\n    data: data\n  };\n};\n\nvar setRecoveryEmail = function setRecoveryEmail(data) {\n  return {\n    type: _constants.SET_RECOVERY_EMAIL,\n    data: data\n  };\n};\n\nvar setRecoveryNotice = function setRecoveryNotice(data) {\n  return {\n    type: _constants.SET_RECOVERY_NOTICE,\n    data: data\n  };\n};\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/screens/reset/actions.js\n// module id = ./js/screens/reset/actions.js\n// module chunks = 4\n\n//# sourceURL=webpack:///./js/screens/reset/actions.js?");

/***/ }),

/***/ "./js/screens/reset/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _templateObject = _taggedTemplateLiteral([\"\\n  background: #f5f5f5;\\n  width: 100%;\\n  height: 100vh;\\n  border-radius: 4px;\\n  display: flex;\\n\"], [\"\\n  background: #f5f5f5;\\n  width: 100%;\\n  height: 100vh;\\n  border-radius: 4px;\\n  display: flex;\\n\"]);\n\nvar _react = __webpack_require__(\"../node_modules/react/index.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(\"../node_modules/prop-types/index.js\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = __webpack_require__(\"../node_modules/react-redux/es/index.js\");\n\nvar _reactSpinners = __webpack_require__(\"../node_modules/react-spinners/index.js\");\n\nvar _reducerInjector = __webpack_require__(\"./js/redux/reducerInjector.js\");\n\nvar _reducerInjector2 = _interopRequireDefault(_reducerInjector);\n\nvar _reactRouterDom = __webpack_require__(\"../node_modules/react-router-dom/es/index.js\");\n\nvar _reducer = __webpack_require__(\"./js/containers/app/reducer.js\");\n\nvar _actions = __webpack_require__(\"./js/containers/header/actions.js\");\n\nvar _actions2 = __webpack_require__(\"./js/containers/footer/actions.js\");\n\nvar _actions3 = __webpack_require__(\"./js/screens/reset/actions.js\");\n\nvar _constants = __webpack_require__(\"./js/screens/reset/constants.js\");\n\nvar _reducer2 = __webpack_require__(\"./js/screens/reset/reducer.js\");\n\nvar _pclnDesignSystem = __webpack_require__(\"../node_modules/pcln-design-system/dist/index.js\");\n\nvar _atoms = __webpack_require__(\"./js/components/UI/atoms/index.js\");\n\nvar _styledComponents = __webpack_require__(\"../node_modules/styled-components/dist/styled-components.browser.es.js\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _reactPose = __webpack_require__(\"../node_modules/react-pose/lib/index.js\");\n\nvar _reactPose2 = _interopRequireDefault(_reactPose);\n\nvar _popmotion = __webpack_require__(\"../node_modules/popmotion/dist/popmotion.es.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _taggedTemplateLiteral(strings, raw) { return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }\n\nvar Modal = _reactPose2.default.div({\n  fullscreen: {\n    scale: 1,\n    transition: \"tween\"\n  },\n  idle: {\n    scale: 0,\n    transition: \"tween\"\n  }\n});\nvar StyledModal = (0, _styledComponents2.default)(Modal)(_templateObject);\n\nvar Reset = function (_React$PureComponent) {\n  _inherits(Reset, _React$PureComponent);\n\n  function Reset(props) {\n    _classCallCheck(this, Reset);\n\n    var _this = _possibleConstructorReturn(this, (Reset.__proto__ || Object.getPrototypeOf(Reset)).call(this, props));\n\n    _this.state = {\n      uid: \"\"\n    };\n    _this.handleResetSubmit = _this.handleResetSubmit.bind(_this);\n    _this.navigateToLocation = _this.navigateToLocation.bind(_this);\n    return _this;\n  }\n\n  _createClass(Reset, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _props = this.props,\n          setHeaderVisibility = _props.setHeaderVisibility,\n          setFooterVisibility = _props.setFooterVisibility,\n          onLoadReset = _props.onLoadReset,\n          match = _props.match;\n\n\n      setTimeout(function () {\n        setHeaderVisibility({\n          isHeaderVisible: false\n        });\n        setFooterVisibility({\n          isFooterVisible: false\n        });\n      }, 200);\n\n      onLoadReset(match.path);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        {\n          style: {\n            height: \"100%\"\n          }\n        },\n        _react2.default.createElement(\n          StyledModal,\n          {\n            pose: this.props.reset.isResetStatusModalOpen ? \"fullscreen\" : \"idle\",\n            style: {\n              display: !this.props.reset.isResetStatusModalOpen ? \"none\" : \"block\"\n            }\n          },\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            {\n              p: 3,\n              flexDirection: \"column\",\n              justify: \"center\",\n              alignItems: \"center\",\n              style: {\n                height: \"100%\"\n              }\n            },\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 2 },\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { align: \"center\", fontSize: 3, bold: true },\n                \"Password Reset Link Sent.\"\n              ),\n              _react2.default.createElement(\n                _pclnDesignSystem.Text.p,\n                { align: \"center\", fontSize: 3 },\n                \"We've sent a password reset link to your email.\"\n              )\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Flex,\n              { justify: \"center\", mb: 3 },\n              _react2.default.createElement(\n                _atoms.Button,\n                { onClick: function onClick(e) {\n                    return _this2.openMailHost();\n                  } },\n                \"See it in your inbox\"\n              )\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Flex,\n              { justify: \"center\" },\n              _react2.default.createElement(\n                _pclnDesignSystem.Link,\n                { onClick: function onClick(e) {\n                    return _this2.props.history.push(\"/login\");\n                  } },\n                _react2.default.createElement(\n                  _pclnDesignSystem.Flex,\n                  null,\n                  _react2.default.createElement(_pclnDesignSystem.Icon, {\n                    name: \"chevronLeft\",\n                    style: {\n                      marginTop: \"4px\"\n                    },\n                    size: 12,\n                    mr: 1\n                  }),\n                  _react2.default.createElement(\n                    _pclnDesignSystem.Text,\n                    {\n                      fontSize: 1,\n                      style: {\n                        textDecoration: \"underline\"\n                      }\n                    },\n                    \"Return back to login\"\n                  )\n                )\n              )\n            )\n          )\n        ),\n        _react2.default.createElement(\n          _pclnDesignSystem.Flex,\n          {\n            px: 3,\n            flexDirection: \"column\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            style: {\n              position: \"absolute\",\n              left: \"50%\",\n              top: \"50%\",\n              transform: \"translateY(-50%) translateX(-50%)\",\n              display: !this.props.reset.isResetStatusModalOpen ? \"block\" : \"none\"\n            },\n            width: [1, 0.9, 0.7]\n          },\n          _react2.default.createElement(\n            \"form\",\n            {\n              method: \"get\",\n              onSubmit: function onSubmit(e) {\n                e.preventDefault();\n                _this2.handleResetSubmit();\n              }\n            },\n            _react2.default.createElement(\n              _pclnDesignSystem.Flex,\n              { flexDirection: \"column\", justify: \"center\", alignItems: \"center\" },\n              _react2.default.createElement(\n                _pclnDesignSystem.Flex,\n                { mb: 3, alignItems: \"center\", justify: \"center\" },\n                _react2.default.createElement(_atoms.BrandLogo, { height: \"45px\", color: \"red\" })\n              ),\n              _react2.default.createElement(\n                _pclnDesignSystem.Box,\n                { mb: this.props.reset.recoveryNotice.length > 0 ? 1 : 3 },\n                _react2.default.createElement(\n                  _atoms.Label,\n                  { mb: 1, fontSize: 0 },\n                  \"Email or Username\"\n                ),\n                _react2.default.createElement(_atoms.Input, {\n                  onChange: function onChange(e) {\n                    return _this2.setState({\n                      uid: e.target.value\n                    });\n                  },\n                  value: this.state.uid,\n                  id: \"username\",\n                  autoFocus: true\n                })\n              ),\n              typeof this.props.reset.recoveryNotice != \"undefined\" && this.props.reset.recoveryNotice.length > 0 && _react2.default.createElement(\n                _pclnDesignSystem.Box,\n                { mb: 2 },\n                _react2.default.createElement(\n                  _pclnDesignSystem.Text,\n                  { fontSize: 1, align: \"right\", color: \"red\" },\n                  this.props.reset.recoveryNotice\n                )\n              ),\n              _react2.default.createElement(\n                _pclnDesignSystem.Box,\n                null,\n                _react2.default.createElement(\n                  _atoms.Button,\n                  {\n                    disabled: this.props.reset.isAttemptingReset || !this.isValidForm(),\n                    fullWidth: true\n                  },\n                  !this.props.reset.isAttemptingReset ? _react2.default.createElement(\n                    _pclnDesignSystem.Text,\n                    null,\n                    \"Reset My Password\"\n                  ) : _react2.default.createElement(_reactSpinners.SyncLoader, { color: \"#f1f1f1\", size: 10, loading: true })\n                )\n              )\n            )\n          )\n        )\n      );\n    }\n  }, {\n    key: \"openMailHost\",\n    value: function openMailHost() {\n      var recoveryEmail = this.props.reset.recoveryEmail;\n      var mailHost = recoveryEmail.split(\"@\")[1];\n      window.open(\"https://\" + mailHost);\n    }\n  }, {\n    key: \"handleResetSubmit\",\n    value: function handleResetSubmit() {\n      var uid = this.state.uid;\n\n\n      this.props.attemptPasswordReset({\n        uid: uid\n      });\n    }\n  }, {\n    key: \"navigateToLocation\",\n    value: function navigateToLocation(location) {\n      this.props.history.push(location);\n    }\n  }, {\n    key: \"isValidForm\",\n    value: function isValidForm() {\n      return this.state.uid.length > 1;\n    }\n  }]);\n\n  return Reset;\n}(_react2.default.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    reset: (0, _reducer2.getResetState)(state).toJS()\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onLoadReset: function onLoadReset(data) {\n      return dispatch((0, _actions3.fetchReset)(data));\n    },\n    attemptPasswordReset: function attemptPasswordReset(data) {\n      return dispatch((0, _actions3.attemptPasswordReset)(data));\n    },\n    setHeaderVisibility: function setHeaderVisibility(data) {\n      return dispatch((0, _actions.setHeaderVisibility)(data));\n    },\n    setFooterVisibility: function setFooterVisibility(data) {\n      return dispatch((0, _actions2.setFooterVisibility)(data));\n    }\n  };\n};\n\nvar withReducer = (0, _reducerInjector2.default)(_constants.REDUCER_NAME, _reducer2.resetReducer)(Reset);\n\nexports.default = (0, _reactRouterDom.withRouter)((0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(withReducer));\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/screens/reset/index.js\n// module id = ./js/screens/reset/index.js\n// module chunks = 4\n\n//# sourceURL=webpack:///./js/screens/reset/index.js?");

/***/ })

});