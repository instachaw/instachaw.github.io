webpackJsonp([3],{"./js/containers/storefeed/constants.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.REDUCER_NAME="storefeed"},"./js/containers/storefeed/index.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n("../node_modules/react/index.js"),l=r(u),d=n("../node_modules/prop-types/index.js"),f=r(d),p=n("../node_modules/react-router-dom/es/index.js"),h=n("../node_modules/react-redux/es/index.js"),m=n("../node_modules/react-infinite-scroll-component/lib/index.js"),S=r(m),E=n("../node_modules/react-lazyload/lib/index.js"),y=r(E),g=n("../node_modules/react-spinners/index.js"),_=n("../node_modules/react-loading-skeleton/dist/bundle.js"),j=r(_),x=n("../node_modules/pcln-design-system/dist/index.js"),v=(n("./js/components/UI/atoms/index.js"),n("./js/containers/storefeed/constants.js"),n("./js/containers/app/reducer.js")),T=function(e){return l.default.createElement(x.Box,null,l.default.createElement(x.Card,{width:1,mb:e.verticalSpacing,px:2,py:1,style:{borderRadius:"4px"},boxShadowSize:"md",borderColor:"white",bg:"white",onClick:function(t){return e.onClick(t)}},l.default.createElement(x.Flex,null,l.default.createElement(b,{store:e.store}),l.default.createElement(R,{store:e.store}))))},b=function(e){var t="https://res.cloudinary.com/instachaw/image/upload/c_scale,w_250/v1534208541/store-"+e.store.id;return l.default.createElement(x.Box,{width:.25,mr:3},l.default.createElement(p.Link,{to:"/store/"+e.store.id},l.default.createElement(x.Box,null,l.default.createElement(y.default,{height:300,placeholder:l.default.createElement(x.Flex,{flexDirection:"column",justify:"center",alignItems:"center"},l.default.createElement(g.ClipLoader,{width:12,loading:!0,color:"#c3c3c3"}))},l.default.createElement(x.Image,{style:{borderRadius:"4px"},src:t+"/"+e.store.brand})))))},R=function(e){return l.default.createElement(x.Box,null,l.default.createElement(x.Flex,null,l.default.createElement(p.Link,{to:"/store/"+e.store.id,style:{textDecoration:"none"}},l.default.createElement(x.Heading,{bold:!0,color:"darkGray",fontSize:3},e.store.name))),l.default.createElement(x.Flex,{mb:2},l.default.createElement(x.Text,{color:"gray",mr:1,fontSize:0},e.store.open_at,"am - ",e.store.close_at,"pm")),l.default.createElement(x.Flex,{mb:2},l.default.createElement(x.Text,{color:"gray",mr:1,fontSize:1},e.store.description)))},F=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return s(t,e),i(t,[{key:"componentWillUnmount",value:function(){}},{key:"renderItems",value:function(){var e=this;return l.default.createElement(x.Box,null,this.props.stores.map(function(t,n){return l.default.createElement(T,c({key:n,store:t,isLoading:e.props.isLoading,onClick:function(n){return e.props.history.push("/store/"+t.id)}},e.props))}),this.props.isLoading&&Array.from("12345").map(function(e,t){return l.default.createElement(x.Flex,{key:t,mb:3},l.default.createElement(x.Flex,{style:{height:"50px"},mr:3,ml:2},l.default.createElement(j.default,{width:70})),l.default.createElement(x.Flex,{style:{flex:3}},l.default.createElement(x.Flex,{style:{flex:3},flexDirection:"column"},l.default.createElement(x.Box,null,l.default.createElement(x.Box,{mb:1},l.default.createElement(j.default,{width:"80%"})),l.default.createElement(x.Box,{style:{height:"10px"}},l.default.createElement(j.default,{width:"50%"})))),l.default.createElement(x.Flex,null,l.default.createElement(x.Box,{style:{height:"25px"},mr:2},l.default.createElement(j.default,{width:35})))))}))}},{key:"render",value:function(){return l.default.createElement(x.Flex,{width:1,flexDirection:"column"},l.default.createElement(S.default,{dataLength:this.props.stores.length,next:this.props.onFetchNextStores,style:{height:"inherit !important",overflow:"hidden !important"},hasMore:this.props.stores.length<this.props.storesCount,loader:l.default.createElement(x.Flex,{justify:"center",alignItems:"center"},l.default.createElement(g.SyncLoader,{color:"#a1a1a1",size:8,loading:!0}))},this.renderItems()))}}]),t}(l.default.PureComponent);F.propTypes={stores:f.default.array,onFetchNextStores:f.default.func,isLoading:f.default.bool,showControls:f.default.bool,useMiniFeedCard:f.default.bool},F.defaultProps={stores:[],storesCount:0,isLoading:!1,onFetchNextStores:function(){},verticalSpacing:3,useMiniFeedCard:!1};var w=function(e){return{app:(0,v.getAppState)(e).toJS()}},O=function(e){return{}};t.default=(0,p.withRouter)((0,h.connect)(w,O)(F))},"./js/screens/home/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attemptSearchQuery=t.fetchHome=t.setSearchResultsLoadingState=t.setFetchedHomeFeedState=t.toggleSearchFocus=t.setSearch=void 0;var r=n("./js/screens/home/constants.js"),o=n("./js/containers/app/actions.js"),a=n("../service/service.js"),s=n("./js/services/ApiService/index.js"),c="https://instachaw.com"===window.location.origin?"https://api.instachaw.com":"http://localhost:3333",i=(t.setSearch=function(e){return{type:r.SET_SEARCH,data:e}},t.toggleSearchFocus=function(e){return{type:r.SET_SEARCH_FOCUS,data:e}},function(e){return{type:r.SET_HOME,data:e}}),u=function(e){return{type:r.SET_SEARCH_RESULTS,data:e}},l=(t.setFetchedHomeFeedState=function(e){return{type:r.SET_FETCHED_HOME_FEED_STATE,data:e}},t.setSearchResultsLoadingState=function(e){return{type:r.SET_SEARCH_RESULTS_LOADING_STATE,data:e}});t.fetchHome=function(e){return function(t){return t((0,o.isLoading)(!0)),(0,a.getPageData)(e).then(function(e){return t((0,o.setMeta)(e.meta)),t((0,o.setUrl)(e.url)),t((0,o.setTitle)(e.title)),e}).then(function(e){t((0,o.isLoading)(!1)),t(i(e))}).catch(function(e){throw console.error(e),e})}},t.attemptSearchQuery=function(e){var t="api/v1/items?search="+e.search;return function(e){(0,s.sendRequest)({endpoint:c+"/"+t,method:"GET"}).then(function(t){void 0!==t&&null!==typeof t&&(e(u({results:t})),e(l({isLoadingSearchResults:!1})))}).catch(function(e){return console.log(e)})}}},"./js/screens/home/index.jsx":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n("../node_modules/react/index.js"),u=r(i),l=n("../node_modules/react-redux/es/index.js"),d=n("./js/redux/reducerInjector.js"),f=r(d),p=n("./js/screens/store/actions.js"),h=n("./js/screens/home/constants.js"),m=n("./js/screens/home/actions.js"),S=n("./js/screens/home/reducer.js"),E=n("./js/containers/app/reducer.js"),y=n("./js/screens/store/reducer.js"),g=n("./js/screens/cart/reducer.js"),_=n("../node_modules/pcln-design-system/dist/index.js"),j=n("./js/containers/storefeed/index.js"),x=r(j),v=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onLoadHome,n=e.fetchStores,r=e.setFetchedHomeFeedState,o=e.home,a=e.store,s=e.match,c=e.app,i=a.currentStorePage;a.activeStore;c.url!==s.url&&t(s.path),a.stores.length&&o.hasFetchedHomeFeed||(n({page:i}),r({hasFetchedHomeFeed:!0}))}},{key:"render",value:function(){var e=this,t=this.props.home,n=(t.title,t.html,t.buttons,this.props.store),r=n.stores,o=n.storesCount;n.isLoadingStores;return!this.props.app.isLoading&&u.default.createElement(_.Flex,{style:{minHeight:"100vh",marginBottom:"70px"},my:4,className:"transition-item",flexDirection:"column",bg:"lightGray"},u.default.createElement(_.Flex,{justify:"center",alignItems:"center"},u.default.createElement(_.Box,{px:3,width:[1,.9,.7,.7]},u.default.createElement(_.Text,{bold:!0,color:"darkGray",fontSize:4,my:3},"Choose a Restaurant."),u.default.createElement(_.Box,null,u.default.createElement(_.Box,{mb:4},u.default.createElement(x.default,{stores:r,storesCount:o,isLoading:this.props.store.isLoadingStores,onFetchNextStores:function(){e.props.setStoresLoadingStatus({isLoadingStores:!0}),e.props.fetchStores({page:currentStorePage})}}))))))}}],[{key:"fetchData",value:function(e,t){var n=t.path;return e.dispatch((0,m.fetchHome)(n))}},{key:"getReducer",value:function(){return{key:h.REDUCER_NAME,reducer:S.homeReducer}}}]),t}(u.default.PureComponent),T=function(e){return{home:(0,S.getHomeState)(e).toJS(),app:(0,E.getAppState)(e).toJS(),cart:(0,g.getCartState)(e).toJS(),store:(0,y.getStoreState)(e).toJS()}},b=function(e){return{onLoadHome:function(t){return e((0,m.fetchHome)(t))},fetchStores:function(t){return e((0,p.fetchStores)(t))},setStoresLoadingStatus:function(t){return e((0,p.setStoresLoadingStatus)(t))},setFetchedHomeFeedState:function(t){return e((0,m.setFetchedHomeFeedState)(t))}}},R=(0,f.default)(h.REDUCER_NAME,S.homeReducer)(v);t.default=(0,l.connect)(T,b)(R)},"./js/screens/store/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attemptSearchQuery=t.fetchStore=t.setSearchResultsLoadingState=t.fetchStores=t.setFetchedStoreFeedState=t.toggleSearchFocus=t.setStoreTitle=t.setActiveStore=t.setSearch=void 0;var r=n("./js/screens/store/constants.js"),o=n("./js/containers/app/actions.js"),a=n("../service/service.js"),s=n("./js/services/ApiService/index.js"),c="https://instachaw.com"===window.location.origin?"https://api.instachaw.com":"http://localhost:3333",i=(t.setSearch=function(e){return{type:r.SET_SEARCH,data:e}},t.setActiveStore=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.STORES_ENDPOINT;return function(t){var n=parseInt(e.id,10),o=e.stores.filter(function(e){return e.id===n})[0];o?(t({type:r.SET_ACTIVE_STORE,data:{store:o}}),t(i(o.name))):t(d({id:n}))}},t.setStoreTitle=function(e){return e="Meals from "+e+" available on Instachaw",function(t){t((0,o.setMeta)({title:e}))}}),u=(t.toggleSearchFocus=function(e){return{type:r.SET_SEARCH_FOCUS,data:e}},function(e){return{type:r.SET_STORE,data:e}}),l=function(e){return{type:r.SET_SEARCH_RESULTS,data:e}},d=(t.setFetchedStoreFeedState=function(e){return{type:r.SET_FETCHED_STORE_FEED_STATE,data:e}},t.fetchStores=function(e){r.STORES_ENDPOINT;return p({isLoadingStores:!0}),function(t){var n=e.id?"/"+e.id:"?page="+e.page,o="api/v1/stores"+n;(0,s.sendRequest)({endpoint:c+"/"+o,method:"GET"}).then(function(n){void 0!==n&&null!==typeof n&&(e.id?(t(m(n)),t({type:r.SET_ACTIVE_STORE,data:{store:n}}),t(i(n.name))):(t(S(void 0!==e.activeStore?n.stores.filter(function(t){return t.id!==e.activeStore.id}):n.stores)),t(E({storesCount:n.storesCount})),t(f({currentStorePage:e.page+1}))),t(p({isLoadingStores:!1})))}).catch(function(e){return console.log(e)})}}),f=function(e){return{type:r.SET_CURRENT_STORES_PAGE,data:e}},p=function(e){return{type:r.SET_STORES_LOADING_STATUS,data:e}},h=t.setSearchResultsLoadingState=function(e){return{type:r.SET_SEARCH_RESULTS_LOADING_STATE,data:e}},m=(t.fetchStore=function(e){return function(t){return t((0,o.isLoading)(!0)),(0,a.getPageData)(e).then(function(e){return t((0,o.setMeta)(e.meta)),t((0,o.setUrl)(e.url)),t((0,o.setTitle)(e.title)),e}).then(function(e){t((0,o.isLoading)(!1)),t(u(e))}).catch(function(e){throw console.error(e),e})}},function(e){return{type:r.SET_STORE,data:e}}),S=function(e){return{type:r.SET_STORES,data:e}},E=function(e){return{type:r.SET_STORES_COUNT,data:e}};t.attemptSearchQuery=function(e){var t="api/v1/items?search="+e.search;return function(e){(0,s.sendRequest)({endpoint:c+"/"+t,method:"GET"}).then(function(t){void 0!==t&&null!==typeof t&&(e(l({results:t})),e(h({isLoadingSearchResults:!1})))}).catch(function(e){return console.log(e)})}}}});