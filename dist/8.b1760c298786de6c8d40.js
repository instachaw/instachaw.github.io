webpackJsonp([8],{

/***/ "./js/screens/login/index.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = __webpack_require__(\"../node_modules/react/index.js\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = __webpack_require__(\"../node_modules/prop-types/index.js\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactRedux = __webpack_require__(\"../node_modules/react-redux/es/index.js\");\n\nvar _reactSpinners = __webpack_require__(\"../node_modules/react-spinners/index.js\");\n\nvar _reactRouterDom = __webpack_require__(\"../node_modules/react-router-dom/es/index.js\");\n\nvar _reducerInjector = __webpack_require__(\"./js/redux/reducerInjector.js\");\n\nvar _reducerInjector2 = _interopRequireDefault(_reducerInjector);\n\nvar _reducer = __webpack_require__(\"./js/containers/app/reducer.js\");\n\nvar _actions = __webpack_require__(\"./js/containers/header/actions.js\");\n\nvar _actions2 = __webpack_require__(\"./js/containers/footer/actions.js\");\n\nvar _actions3 = __webpack_require__(\"./js/screens/login/actions.js\");\n\nvar _constants = __webpack_require__(\"./js/screens/login/constants.js\");\n\nvar _reducer2 = __webpack_require__(\"./js/screens/login/reducer.js\");\n\nvar _pclnDesignSystem = __webpack_require__(\"../node_modules/pcln-design-system/dist/index.js\");\n\nvar _styledComponents = __webpack_require__(\"../node_modules/styled-components/dist/styled-components.browser.es.js\");\n\nvar _styledComponents2 = _interopRequireDefault(_styledComponents);\n\nvar _atoms = __webpack_require__(\"./js/components/UI/atoms/index.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Login = function (_React$PureComponent) {\n  _inherits(Login, _React$PureComponent);\n\n  function Login(props) {\n    _classCallCheck(this, Login);\n\n    var _this = _possibleConstructorReturn(this, (Login.__proto__ || Object.getPrototypeOf(Login)).call(this, props));\n\n    _this.state = {\n      uid: \"\",\n      password: \"\",\n      loginNotice: \"\"\n    };\n    _this.handleLoginSubmit = _this.handleLoginSubmit.bind(_this);\n    _this.navigateToLocation = _this.navigateToLocation.bind(_this);\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _props = this.props,\n          setHeaderVisibility = _props.setHeaderVisibility,\n          setFooterVisibility = _props.setFooterVisibility,\n          onLoadLogin = _props.onLoadLogin,\n          match = _props.match;\n\n\n      setTimeout(function () {\n        setHeaderVisibility({\n          isHeaderVisible: false\n        });\n        setFooterVisibility({\n          isFooterVisible: false\n        });\n      }, 200);\n\n      onLoadLogin(match.path);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react2.default.createElement(\n        _pclnDesignSystem.Flex,\n        {\n          px: 3,\n          flexDirection: \"column\",\n          justify: \"center\",\n          style: {\n            height: \"80%\",\n            position: \"absolute\",\n            left: \"50%\",\n            transform: \"translateX(-50%)\"\n          },\n          width: [1, 0.9, 0.7]\n        },\n        _react2.default.createElement(\n          \"form\",\n          { method: \"get\", onSubmit: this.handleLoginSubmit },\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            { mb: 3, alignItems: \"center\", justify: \"center\" },\n            _react2.default.createElement(_atoms.BrandLogo, { height: \"45px\", color: \"red\" })\n          ),\n          _react2.default.createElement(\n            _pclnDesignSystem.Flex,\n            { flexDirection: \"column\", justify: \"center\", alignItems: \"center\" },\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 3 },\n              _react2.default.createElement(\n                _atoms.Label,\n                { mb: 1, fontSize: 0 },\n                \"Email or Username\"\n              ),\n              _react2.default.createElement(_atoms.Input, {\n                onChange: function onChange(e) {\n                  return _this2.setState({\n                    uid: e.target.value\n                  });\n                },\n                value: this.state.uid,\n                required: true,\n                id: \"username\"\n              })\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: this.state.loginNotice.length > 0 ? 1 : 3 },\n              _react2.default.createElement(\n                _pclnDesignSystem.Flex,\n                null,\n                _react2.default.createElement(\n                  _atoms.Label,\n                  {\n                    style: {\n                      flex: 1\n                    },\n                    mb: 1,\n                    fontSize: 0\n                  },\n                  \"Password\"\n                ),\n                _react2.default.createElement(\n                  _pclnDesignSystem.Flex,\n                  { flexDirection: \"flex-end\" },\n                  _react2.default.createElement(\n                    _pclnDesignSystem.Link,\n                    {\n                      onClick: function onClick(e) {\n                        e.preventDefault();\n                        _this2.navigateToLocation(\"/resetPassword\");\n                      },\n                      mb: 1,\n                      style: {\n                        flex: 3\n                      }\n                    },\n                    _react2.default.createElement(\n                      _pclnDesignSystem.Text,\n                      { fontSize: 0 },\n                      \"Forgot Password?\"\n                    )\n                  )\n                )\n              ),\n              _react2.default.createElement(_atoms.Input, {\n                onChange: function onChange(e) {\n                  return _this2.setState({\n                    password: e.target.value\n                  });\n                },\n                value: this.state.password,\n                type: \"password\",\n                id: \"password\",\n                required: true\n              })\n            ),\n            this.state.loginNotice.length > 0 && _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              { mb: 3 },\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { align: \"right\", fontSize: 0, color: \"darkRed\" },\n                this.state.loginNotice\n              )\n            ),\n            _react2.default.createElement(\n              _pclnDesignSystem.Box,\n              null,\n              _react2.default.createElement(\n                _atoms.Button,\n                {\n                  disabled: this.props.login.isAttemptingLogin || !this.isValidForm(),\n                  fullWidth: true\n                },\n                !this.props.login.isAttemptingLogin ? _react2.default.createElement(\n                  _pclnDesignSystem.Text,\n                  null,\n                  \"Login\"\n                ) : _react2.default.createElement(_reactSpinners.SyncLoader, { color: \"#f1f1f1\", size: 10, loading: true })\n              ),\n              _react2.default.createElement(\n                _pclnDesignSystem.Text,\n                { my: 2, align: \"center\" },\n                \"or\"\n              ),\n              _react2.default.createElement(\n                _pclnDesignSystem.BlockLink,\n                {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  color: \"gray\",\n                  onClick: function onClick(e) {\n                    return _this2.navigateToLocation(\"/register\");\n                  }\n                },\n                _react2.default.createElement(\n                  _pclnDesignSystem.Text,\n                  {\n                    color: \"blue\",\n                    style: {\n                      textDecoration: \"underline\"\n                    }\n                  },\n                  \"Create an account\"\n                )\n              )\n            )\n          )\n        )\n      );\n    }\n  }, {\n    key: \"handleLoginSubmit\",\n    value: function handleLoginSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      var _state = this.state,\n          uid = _state.uid,\n          password = _state.password;\n\n\n      this.props.attemptLogin({\n        uid: uid,\n        password: password\n      }, function (response) {\n        if (typeof response !== \"undefined\") {\n          if (typeof response.user === \"undefined\") {\n            _this3.setState({\n              loginNotice: response[0].message\n            });\n          } else {\n            _this3.navigateToLocation(\"/\");\n          }\n        }\n      });\n    }\n  }, {\n    key: \"navigateToLocation\",\n    value: function navigateToLocation(location) {\n      this.props.history.push(location);\n    }\n  }, {\n    key: \"isValidForm\",\n    value: function isValidForm() {\n      return this.state.uid.length && this.state.password.length;\n    }\n  }]);\n\n  return Login;\n}(_react2.default.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    login: (0, _reducer2.getLoginState)(state).toJS()\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    onLoadLogin: function onLoadLogin(data) {\n      return dispatch((0, _actions3.fetchLogin)(data));\n    },\n    attemptLogin: function attemptLogin(data, cb) {\n      return dispatch((0, _actions3.attemptLogin)(data, cb));\n    },\n    setHeaderVisibility: function setHeaderVisibility(data) {\n      return dispatch((0, _actions.setHeaderVisibility)(data));\n    },\n    setFooterVisibility: function setFooterVisibility(data) {\n      return dispatch((0, _actions2.setFooterVisibility)(data));\n    }\n  };\n};\n\nvar withReducer = (0, _reducerInjector2.default)(_constants.REDUCER_NAME, _reducer2.loginReducer)(Login);\nexports.default = (0, _reactRouterDom.withRouter)((0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(withReducer));\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/screens/login/index.js\n// module id = ./js/screens/login/index.js\n// module chunks = 8\n\n//# sourceURL=webpack:///./js/screens/login/index.js?");

/***/ })

});